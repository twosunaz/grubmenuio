Vue.config.debug=!0,Vue.config.devtools=!0,Vue.use(DatePicker);var OrderableTimedProductRulesApp=new Vue({el:"#orderable-timed-products-app",data:{rules:[],action:"set_visible",i18n:{date_validation:orderable_pro_conditions_params.i18n.date_validation,time_validation:orderable_pro_conditions_params.i18n.time_validation,from:orderable_pro_conditions_params.i18n.from,to:orderable_pro_conditions_params.i18n.to}},mounted:function(){var e=jQuery("#orderable-timed-products-app").data("rules");this.rules=Array.isArray(e.rules)?e.rules:[],this.action=e&&e.action?e.action:"set_visible"},methods:{addRule:function(){this.rules.push({id:this.generateRuleID(),date_condition:"on_date",date_from:"",date_to:"",time_from:"",time_to:"",days:[],day_toggle_open:!1})},generateRuleID(){return min=1e10,max=1e13,min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min+1))+min},deleteCondition:function(e){this.rules.splice(e,1)},dayChanged:function(e,t){this.rules[t].days=e},fromPlaceholder:function(e){return"on_date"===e.date_condition?orderable_pro_conditions_params.i18n.date:orderable_pro_conditions_params.i18n.from}},computed:{rulesJson:function(){var e={action:this.action,rules:this.rules};return JSON.stringify(e)}}}),OrderableMultiselect=Vue.component("orderable-multiselect",{data:function(){return{all_days:orderable_pro_conditions_params.days,select_label:orderable_pro_conditions_params.i18n.days_select_value,toggle_open:!1,this_days:[]}},props:["days","idx"],mounted:function(){this.this_days=this.days},watch:{this_days:function(){this.$emit("day_changed",this.this_days,this.idx)}},methods:{close_toggle:function(){this.toggle_open=!1},selected_days:function(){return this.days.map(e=>this.all_days[e]).join(", ")}},template:`
		<div class="orderable-multiselect" v-click-outside='close_toggle'>
			<div
				class="orderable-multiselect__label"
				@click='toggle_open = ! toggle_open'
				:class='{"orderable-multiselect__label--open": toggle_open}'
				@blur='toggle_open = false'
				>
				<span v-if='this_days.length' class="orderable-multiselect__label--value" >
				{{ selected_days() }}
				</span>
				<span v-else class="orderable-multiselect__label--placeholder">
					{{ select_label }}
				</span>
			</div>
			<div v-show='toggle_open' class='orderable-multiselect__dropdown'>	
				<label v-for='(day,dayKey) in all_days'><input type='checkbox' v-model='this_days' :value='dayKey'> {{day}}</label>
			</div>
		</div>	
	`});Vue.directive("click-outside",{bind:function(a,n,o){a.eventSetDrag=function(){a.setAttribute("data-dragging","yes")},a.eventClearDrag=function(){a.removeAttribute("data-dragging")},a.eventOnClick=function(e){var t=a.getAttribute("data-dragging");a==e.target||a.contains(e.target)||t||o.context[n.expression](e)},document.addEventListener("touchstart",a.eventClearDrag),document.addEventListener("touchmove",a.eventSetDrag),document.addEventListener("click",a.eventOnClick),document.addEventListener("touchend",a.eventOnClick)},unbind:function(e){document.removeEventListener("touchstart",e.eventClearDrag),document.removeEventListener("touchmove",e.eventSetDrag),document.removeEventListener("click",e.eventOnClick),document.removeEventListener("touchend",e.eventOnClick),e.removeAttribute("data-dragging")}});