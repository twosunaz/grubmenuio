import{e as d,u as C,f as A,J as U,q as $,g as c,j as e,i as u,A as B,B as F,p as n,F as v,t as o,w as h,k as V,T as O,x as I,s as N,n as b,o as i,_,v as S}from"../app.build.DVcfFWU_.js";import{l as J}from"./lmnFetch-DeRrp9BG.js";import{_ as z}from"./index-CRgHs0Pg.js";import{_ as P}from"./index-BxFqpWTU.js";import{_ as D}from"./index-CqlI0lnC.js";import{i as M}from"./inSearch-uRPV3sBV.js";import"./notify-CXlPex_L.js";const w=d([]),g=d(!0);d([]);d(0);d([]);d([]);d(null);const T=d(""),a=d({per_page:30,page:1,search:"",total:0,total_pages:0,search:""}),k=d(null);let x;const m=async()=>{x||(x=C()),x.updateState("loading",!0);const y={endpoint:"snipvault/v1/errorlog",params:{status:"any",per_page:a.value.per_page,search:a.value.search,page:a.value.page}},l=await J(y);if(x.updateState("loading",!1),g.value=!1,!l)return;w.value=l.data;const{totalItems:p,totalPages:f}=l;a.value.total_pages=f,a.value.total=p},G={class:"flex flex-row w-full"},L={class:"flex flex-col h-full max-h-full overflow-hidden relative w-[300px] border-r border-zinc-200 dark:border-zinc-700 shrink-0"},X={class:"relative w-full border-b border-zinc-200 dark:border-zinc-700"},q=["placeholder"],R={class:"relative w-full border-b border-zinc-200 dark:border-zinc-700 flex flex-row px-5 py-2 pr-3 items-center"},W={class:"text-xs text-zinc-500 dark:text-zinc-400 grow"},Y={class:"flex flex-row items-center"},H={class:"text-xs text-zinc-500 dark:text-zinc-400 grow mr-2"},K=e("div",{class:"grow"},[e("div",{class:"w-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 h-4 animate-pulse"})],-1),Q=e("div",{class:"w-8 rounded-lg bg-zinc-100 dark:bg-zinc-800 h-4 animate-pulse mr-2"},null,-1),Z=e("div",{class:"w-8 rounded-lg bg-zinc-100 dark:bg-zinc-800 h-4 animate-pulse mr-2"},null,-1),ee={key:0,class:"flex flex-col gap-2 p-3"},te=e("div",{class:"w-full rounded-lg bg-zinc-100 dark:bg-zinc-800 h-10 animate-pulse"},null,-1),le=[te],se={key:1,class:"flex flex-col grow overflow-auto shrink"},ae={key:0,class:"text-center text-zinc-500 dark:text-zinc-400 p-3"},oe=["onClick"],ne={class:"flex flex-col justify-center col-span-2 py-3"},re={class:"line-clamp-[3] break-words break-all overflow-hidden text-sm font-mono"},ie={class:"grow flex flex-row w-full"},de={key:1,class:"border-l border-zinc-200 dark:border-zinc-700 w-[360px] shrink-0 h-full max-h-full overflow-auto flex flex-col"},ce={class:"col-span-3 flex flex-row place-content-between items-center p-6 border-b border-zinc-200 dark:border-zinc-700 cursor-pointer hover:text-zinc-950 dark:hover:text-zinc-100"},ue={class:""},pe={class:"grid grid-cols-3 gap-3 p-6"},fe={class:"flex flex-col justify-center"},ve={class:"text-sm text-zinc-500 dark:text-zinc-400"},_e={class:"col-span-2 flex flex-row items-start"},xe={class:"flex flex-col justify-center"},me={class:"text-sm text-zinc-500 dark:text-zinc-400"},ge={class:"flex flex-col justify-center"},he={class:"text-sm text-zinc-500 dark:text-zinc-400"},be={class:"flex flex-col justify-center"},ze={class:"text-sm text-zinc-500 dark:text-zinc-400"},ke={class:"flex flex-col pt-2"},we={class:"text-sm text-zinc-500 dark:text-zinc-400"},ye={key:2,class:"w-full h-full flex flex-col items-center justify-center p-16"},$e={__name:"index",setup(y){C();const l=d({}),p=d(""),f=t=>t==="FATAL"?"text-red-600 border-red-600":t==="WARNING"?"text-amber-500 border-amber-500":t==="NOTICE"?"text-blue-500 border-blue-500":t==="SYNTAX"?"text-purple-500 border-purple-500":t==="EXCEPTION"?"text-orange-600 border-orange-600":t==="MESSAGE"?"text-green-600 border-green-600":"text-zinc-500 border-zinc-500";A(()=>snippets.value.filter(t=>M(T.value,JSON.stringify(t)))),U(()=>{l.value.id&&(p.value=JSON.stringify(l.value,null,2))});const E=()=>{a.value.page--,m()},j=()=>{a.value.page++,m()};return $(()=>a.value.search,()=>{a.value.page=1,k.value&&k.value.abort(),k.value=new AbortController,m()}),m(),(t,r)=>(i(),c("div",G,[e("div",L,[e("div",X,[B(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=s=>n(a).search=s),placeholder:t.__("Search errors...","snipvault"),class:"px-6 py-4 pl-12 w-full bg-white dark:bg-zinc-900 focus:outline-0"},null,8,q),[[F,n(a).search]]),u(_,{icon:"search",class:"absolute left-5 top-1/2 -translate-y-1/2 text-zinc-500"})]),e("div",R,[n(g)?(i(),c(v,{key:1},[K,Q,Z],64)):(i(),c(v,{key:0},[e("div",W,o(n(a).total)+" "+o(t.__("results","snipvault")),1),e("div",Y,[e("div",H,o(n(a).page)+" "+o(t.__("of","snipvault"))+" "+o(n(a).total_pages),1),u(V,{type:"transparent",onClick:E,disabled:n(a).page<=1},{default:h(()=>[u(_,{icon:"chevron_left"})]),_:1},8,["disabled"]),u(V,{type:"transparent",onClick:j,disabled:n(a).page>=n(a).total_pages},{default:h(()=>[u(_,{icon:"chevron_right"})]),_:1},8,["disabled"])])],64))]),u(O,{mode:"out-in"},{default:h(()=>[n(g)?(i(),c("div",ee,[(i(),c(v,null,S(4,s=>e("div",null,le)),64))])):(i(),c("div",se,[!n(w).length&&!n(g)?(i(),c("div",ae,o(t.__("No errors found","snipvault")),1)):N("",!0),(i(!0),c(v,null,S(n(w),s=>(i(),c("div",{class:b(["grid grid-cols-3 gap-1 pr-3 cursor-pointer transition-all group relative border-b border-zinc-200 dark:border-zinc-700 pl-0",l.value.id==s.id?"text-zinc-900 dark:text-zinc-100 bg-zinc-100 dark:bg-zinc-800":"hover:text-zinc-900 hover:dark:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 dark:text-zinc-400"]),onClick:Ve=>l.value=s},[e("div",{class:b(["text-xs pl-5 border-l-2 font-mono h-full flex flex-col justify-center",f(s.type)])},[e("span",null,o(s.type),1)],2),e("div",ne,[e("div",re,o(s.message),1)])],10,oe))),256))]))]),_:1})]),e("div",ie,[l.value.id?(i(),I(D,{key:0,modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=s=>p.value=s),language:"json",class:"w-full grow"},null,8,["modelValue"])):N("",!0),l.value.id?(i(),c("div",de,[e("div",ce,[e("div",ue,o(t.__("Error info","snipvault")),1)]),e("div",pe,[e("div",fe,[e("span",ve,o(t.__("Status","snipvault")),1)]),e("div",_e,[e("div",{class:b(["px-2 py-1 text-sm bg-zinc-100 dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 font-mono",f(l.value.type)])},o(l.value.type),3)]),e("div",xe,[e("span",me,o(t.__("File","snipvault")),1)]),u(z,{type:"text",modelValue:l.value.file,"onUpdate:modelValue":r[2]||(r[2]=s=>l.value.file=s),placeholder:t.__("No file path found","snipvault"),class:"col-span-2",copy:!0,disabled:!0},null,8,["modelValue","placeholder"]),e("div",ge,[e("span",he,o(t.__("Date","snipvault")),1)]),u(z,{type:"text",modelValue:l.value.date,"onUpdate:modelValue":r[3]||(r[3]=s=>l.value.date=s),class:"col-span-2",disabled:!0},null,8,["modelValue"]),e("div",be,[e("span",ze,o(t.__("Time","snipvault")),1)]),u(z,{type:"text",modelValue:l.value.time,"onUpdate:modelValue":r[4]||(r[4]=s=>l.value.time=s),class:"col-span-2",disabled:!0},null,8,["modelValue"]),e("div",ke,[e("span",we,o(t.__("Message","snipvault")),1)]),u(P,{type:"text",modelValue:l.value.message,"onUpdate:modelValue":r[5]||(r[5]=s=>l.value.message=s),class:"col-span-2"},null,8,["modelValue"])])])):(i(),c("div",ye,[u(_,{icon:"code",style:{"font-size":"88px"}}),e("div",null,o(t.__("No error selected","snipvault")),1)]))])]))}};export{$e as default};
//# sourceMappingURL=index-CnXbcBcI.js.map
