import{N as te,u as se,e as c,f as ie,O as oe,g as o,j as i,i as u,A as N,B as G,D as C,t as l,F as b,v as W,s as _,w as I,k as S,c as ae,P as le,Q as re,z as pe,a as de,o as a,_ as v,n as ce}from"../app.build.DVcfFWU_.js";import{l as $}from"./lmnFetch-DeRrp9BG.js";import{n as me}from"./notify-CXlPex_L.js";import{i as ue}from"./inSearch-uRPV3sBV.js";import{h as B}from"./handleTokenExpiration-BsSYarxJ.js";import{_ as we}from"./index-Bt0YRkAh.js";const O=[{command:"wp help",description:(0,window.wp.i18n.__)("Displays help information for any WP-CLI command","snipvault")},{command:"wp core",description:(0,window.wp.i18n.__)("Manages WordPress core installation, updates, and verification","snipvault")},{command:"wp core version",description:(0,window.wp.i18n.__)("Displays the WordPress version installed","snipvault")},{command:"wp core update",description:(0,window.wp.i18n.__)("Updates WordPress core to the latest version","snipvault")},{command:"wp db",description:(0,window.wp.i18n.__)("Performs database operations","snipvault")},{command:"wp db check",description:(0,window.wp.i18n.__)("Checks the database for errors","snipvault")},{command:"wp db optimize",description:(0,window.wp.i18n.__)("Optimizes the database tables","snipvault")},{command:"wp db repair",description:(0,window.wp.i18n.__)("Repairs the database tables","snipvault")},{command:"wp db export",description:(0,window.wp.i18n.__)("Exports the database to a file","snipvault")},{command:"wp db import",description:(0,window.wp.i18n.__)("Imports a database from a file","snipvault")},{command:"wp db query",description:(0,window.wp.i18n.__)("Executes an SQL query against the database","snipvault")},{command:"wp post",description:(0,window.wp.i18n.__)("Manages WordPress posts","snipvault")},{command:"wp post list",description:(0,window.wp.i18n.__)("Lists posts with optional filtering","snipvault")},{command:"wp post get",description:(0,window.wp.i18n.__)("Gets the details for a specific post","snipvault")},{command:"wp post create",description:(0,window.wp.i18n.__)("Creates a new post","snipvault")},{command:"wp post update",description:(0,window.wp.i18n.__)("Updates an existing post","snipvault")},{command:"wp post delete",description:(0,window.wp.i18n.__)("Deletes a post","snipvault")},{command:"wp user",description:(0,window.wp.i18n.__)("Manages WordPress users","snipvault")},{command:"wp user list",description:(0,window.wp.i18n.__)("Lists users with optional filtering","snipvault")},{command:"wp user get",description:(0,window.wp.i18n.__)("Gets the details for a specific user","snipvault")},{command:"wp user create",description:(0,window.wp.i18n.__)("Creates a new user","snipvault")},{command:"wp user update",description:(0,window.wp.i18n.__)("Updates an existing user","snipvault")},{command:"wp user delete",description:(0,window.wp.i18n.__)("Deletes a user","snipvault")},{command:"wp comment",description:(0,window.wp.i18n.__)("Manages WordPress comments","snipvault")},{command:"wp comment list",description:(0,window.wp.i18n.__)("Lists comments with optional filtering","snipvault")},{command:"wp comment get",description:(0,window.wp.i18n.__)("Gets the details for a specific comment","snipvault")},{command:"wp comment create",description:(0,window.wp.i18n.__)("Creates a new comment","snipvault")},{command:"wp comment update",description:(0,window.wp.i18n.__)("Updates an existing comment","snipvault")},{command:"wp comment delete",description:(0,window.wp.i18n.__)("Deletes a comment","snipvault")},{command:"wp term",description:(0,window.wp.i18n.__)("Manages WordPress terms (categories, tags, etc.)","snipvault")},{command:"wp term list",description:(0,window.wp.i18n.__)("Lists terms with optional filtering","snipvault")},{command:"wp term get",description:(0,window.wp.i18n.__)("Gets the details for a specific term","snipvault")},{command:"wp term create",description:(0,window.wp.i18n.__)("Creates a new term","snipvault")},{command:"wp term update",description:(0,window.wp.i18n.__)("Updates an existing term","snipvault")},{command:"wp term delete",description:(0,window.wp.i18n.__)("Deletes a term","snipvault")},{command:"wp plugin",description:(0,window.wp.i18n.__)("Manages WordPress plugins","snipvault")},{command:"wp plugin list",description:(0,window.wp.i18n.__)("Lists installed plugins","snipvault")},{command:"wp plugin status",description:(0,window.wp.i18n.__)("Displays status of installed plugins","snipvault")},{command:"wp plugin activate",description:(0,window.wp.i18n.__)("Activates one or more plugins","snipvault")},{command:"wp plugin deactivate",description:(0,window.wp.i18n.__)("Deactivates one or more plugins","snipvault")},{command:"wp theme",description:(0,window.wp.i18n.__)("Manages WordPress themes","snipvault")},{command:"wp theme list",description:(0,window.wp.i18n.__)("Lists installed themes","snipvault")},{command:"wp theme status",description:(0,window.wp.i18n.__)("Displays status of installed themes","snipvault")},{command:"wp theme activate",description:(0,window.wp.i18n.__)("Activates a theme","snipvault")},{command:"wp cache",description:(0,window.wp.i18n.__)("Manages WordPress object cache","snipvault")},{command:"wp cache flush",description:(0,window.wp.i18n.__)("Flushes the object cache","snipvault")},{command:"wp option",description:(0,window.wp.i18n.__)("Manages WordPress options","snipvault")},{command:"wp option list",description:(0,window.wp.i18n.__)("Lists options with optional filtering","snipvault")},{command:"wp option get",description:(0,window.wp.i18n.__)("Gets the value for a specific option","snipvault")},{command:"wp option add",description:(0,window.wp.i18n.__)("Adds a new option","snipvault")},{command:"wp option update",description:(0,window.wp.i18n.__)("Updates an existing option","snipvault")},{command:"wp option delete",description:(0,window.wp.i18n.__)("Deletes an option","snipvault")},{command:"wp scaffold",description:(0,window.wp.i18n.__)("Generates code for WordPress development","snipvault")},{command:"wp scaffold plugin",description:(0,window.wp.i18n.__)("Generates starter code for a plugin","snipvault")},{command:"wp scaffold theme",description:(0,window.wp.i18n.__)("Generates starter code for a theme","snipvault")},{command:"wp site",description:(0,window.wp.i18n.__)("Manages sites in a WordPress multisite installation","snipvault")},{command:"wp site create",description:(0,window.wp.i18n.__)("Creates a new site in a multisite installation","snipvault")},{command:"wp site list",description:(0,window.wp.i18n.__)("Lists all sites in a multisite installation","snipvault")},{command:"wp search-replace",description:(0,window.wp.i18n.__)("Searches for and replaces strings in the database","snipvault")},{command:"wp media",description:(0,window.wp.i18n.__)("Manages WordPress media files","snipvault")},{command:"wp media regenerate",description:(0,window.wp.i18n.__)("Regenerates media thumbnails","snipvault")},{command:"wp rewrite",description:(0,window.wp.i18n.__)("Manages WordPress rewrite rules","snipvault")},{command:"wp rewrite flush",description:(0,window.wp.i18n.__)("Flushes rewrite rules","snipvault")},{command:"wp rewrite structure",description:(0,window.wp.i18n.__)("Updates the permalink structure","snipvault")},{command:"wp cron",description:(0,window.wp.i18n.__)("Manages WordPress cron events and schedules","snipvault")},{command:"wp cron event list",description:(0,window.wp.i18n.__)("Lists all cron events","snipvault")},{command:"wp cron event run",description:(0,window.wp.i18n.__)("Runs a specific cron event","snipvault")},{command:"wp cli",description:(0,window.wp.i18n.__)("Manages WP-CLI itself","snipvault")},{command:"wp cli info",description:(0,window.wp.i18n.__)("Displays information about WP-CLI","snipvault")},{command:"wp cli version",description:(0,window.wp.i18n.__)("Displays the WP-CLI version","snipvault")}],_e=L=>(le("data-v-1e2b3605"),L=L(),re(),L),ve={class:"flex flex-row h-full max-h-full overflow-hidden grow"},he={class:"w-[300px] border-r border-zinc-200 dark:border-zinc-700 h-full max-h-full shrink-0"},fe={class:"flex flex-col h-full max-h-full overflow-hidden relative"},ge={class:"relative w-full border-b border-zinc-200 dark:border-zinc-700 flex flex-row pr-4 items-center gap-1"},be=["placeholder"],ye={class:"overflow-y-auto flex-grow"},xe={key:0,class:"p-4 text-center text-zinc-500"},ke={key:1,class:"p-4 text-center text-zinc-500"},Ce={key:2,class:"command-list"},Le=["onClick"],Pe=["innerHTML"],ze={class:"flex flex-col flex-grow overflow-hidden grow"},We={key:0,class:"border-b border-zinc-200 dark:border-zinc-700 p-4 overflow-y-auto max-h-[40%] shrink-0"},De={class:"flex justify-between items-center mb-4"},Me={class:"text-lg font-semibold"},Te={key:0,class:"p-4 text-center text-zinc-500"},Ie={key:1},Se={key:0,class:"mb-4"},$e={key:1,class:"mb-4"},Ee={class:"font-medium mb-1"},Ae={class:"bg-zinc-100 dark:bg-zinc-800 p-2 rounded font-mono text-sm"},Re={key:2,class:"mb-4"},Ue={class:"font-medium mb-1"},He={class:"bg-zinc-100 dark:bg-zinc-800 p-2 rounded font-mono text-sm"},je={class:"text-blue-600 dark:text-blue-400"},Fe={key:3,class:"mb-4"},Ne={class:"font-medium mb-1"},Ge={class:"bg-zinc-100 dark:bg-zinc-800 p-2 rounded font-mono text-sm"},Be=["onClick"],Oe={class:"mt-4"},Ve={class:"flex-grow flex flex-col overflow-hidden"},qe={key:0,class:"text-center p-4"},Ke=["innerHTML"],Qe={key:1,class:"text-yellow-400 flex flex-row items-center"},Je={class:"border-t border-zinc-700 flex items-center bg-zinc-900 px-4 py-2"},Xe=_e(()=>i("span",{class:"text-green-400 mr-2 font-mono"},"$",-1)),Ye=["placeholder","disabled"],Ze={__name:"index",setup(L){const h=se();de();const y=c(!1),D=c(null),V=ae(),x=c(""),p=c(""),M=c([]),f=c([]),w=c(-1);c([]);const q=c([]),P=c(!1),K=c(!1),r=c(null),z=c(null),E=ie(()=>x.value?O.filter(n=>ue(x.value,n.command,n.description)):O),Q=async()=>{h.updateState("loading",!0);const e=await $({endpoint:"snipvault/v1/cli/status"});if(h.updateState("loading",!1),!e)return;if(e.data.active){B(e.data.expires,R,d=>{}),y.value=!0,U();return}if(!await D.value.show({title:(0,window.wp.i18n.__)("Enable CLI interface?","snipvault"),message:(0,window.wp.i18n.__)("For security reasons, the CLI requires temporary activation. Once activated, it will remain available for one hour and then automatically deactivate.","snipvault"),okButton:(0,window.wp.i18n.__)("Activate for 1 Hour","snipvault")})){V.push("/");return}A()},A=async()=>{h.updateState("loading",!0);const e=await $({endpoint:"snipvault/v1/cli/enable",type:"POST"});if(h.updateState("loading",!1),!!e&&e.data.success){y.value=!0,me({title:(0,window.wp.i18n.__)("CLI interface enabled","snipvault"),type:"success"}),B(e.data.expires,R,t=>{}),U();return}},R=async()=>{await D.value.show({title:(0,window.wp.i18n.__)("WP CLI access has expired","snipvault"),message:(0,window.wp.i18n.__)("For security reasons, access to the WP-CLI has now expired. Would you like to extend access for one hour?","snipvault"),okButton:(0,window.wp.i18n.__)("Activate for 1 Hour","snipvault")})&&A()},U=async()=>{const e=await $({endpoint:"snipvault/v1/cli/commands"});if(!e||!e.data.success){s("Error fetching available commands.","error");return}J(e.data)},J=n=>{if(n.version?s(`WP-CLI ${n.version.version}`,"info"):s("WP-CLI interface ready","info"),n.info){const e=`PHP: ${n.info.php_version} | MySQL: ${n.info.mysql_version} | WordPress: ${n.info.wp_version}`;s(e,"system")}s("This feature may not work on all hosts.","error"),s("Type 'help' to see available commands or select from the left panel.","help")},T=async(n=null)=>{const e=n||p.value.trim();if(!e)return;if(f.value.unshift(e),f.value.length>50&&f.value.pop(),w.value=-1,e.toLowerCase()==="clear"){M.value=[],p.value="";return}if(e.toLowerCase()==="help"){ee(),p.value="";return}s(`$ ${e}`,"command"),P.value=!0,p.value="";const t=e.trim()===""||e.trim()==="help"||e.includes("--help")||e.includes(" -h")||e==="-h";let d=e;t||(d=e.startsWith("wp ")?e.substring(3):e);const m=new FormData;m.append("action","snirvault_run_wp_cli"),m.append("security_nonce",h.state.ajaxNonce),m.append("command",d);try{const g=await fetch(h.state.ajaxURL,{method:"POST",credentials:"same-origin",body:m});if(P.value=!1,!g.ok){try{const F=await g.json();s(`${F.data.message} Status: ${g.status}`,"error")}catch{s(`HTTP error Status: ${g.status}`,"error")}return}const k=await g.json();k.success?k.output.trim()?s(k.output.trim(),"output"):s("Command executed successfully (no output).","success"):k.error?s(k.error,"error"):s("Command failed with no error message.","error")}catch{s("Unable to connect to wp cli right now","error")}H()},s=(n,e="output")=>{M.value.push({text:n,type:e,id:Date.now()}),H()},H=async()=>{await pe(),z.value&&(z.value.scrollTop=z.value.scrollHeight)},j=n=>{f.value.length!==0&&(n==="up"?w.value=Math.min(f.value.length-1,w.value+1):w.value=Math.max(-1,w.value-1),w.value===-1?p.value="":p.value=f.value[w.value])},X=n=>{n.key==="Enter"?T():n.key==="ArrowUp"?(n.preventDefault(),j("up")):n.key==="ArrowDown"?(n.preventDefault(),j("down")):n.key==="Tab"&&(n.preventDefault(),Y())},Y=()=>{const n=p.value.trim();if(!n)return;const e=q.value.filter(t=>t.toLowerCase().startsWith(n.toLowerCase()));if(e.length===1)p.value=e[0];else if(e.length>1){s("Available completions:","system"),e.slice(0,10).forEach(d=>{s(`  ${d}`,"help")}),e.length>10&&s(`  ... and ${e.length-10} more`,"help");let t=e[0];for(let d=1;d<e.length;d++){let m=0;for(;m<t.length&&m<e[d].length&&t[m].toLowerCase()===e[d][m].toLowerCase();)m++;t=t.substring(0,m)}t.length>n.length&&(p.value=t)}},Z=async n=>{n&&(r.value={name:n.command,loading:!1,description:n.description})},ee=()=>{s("Available commands:","help"),s("  help - Show this help","help"),s("  clear - Clear the terminal","help"),s("  wp ... - Execute a WP-CLI command","help"),s("","help"),s("Keyboard shortcuts:","help"),s("  Up/Down - Navigate command history","help"),s("  Tab - Autocomplete command","help"),s("","help"),s("Tips:","help"),s("  - Click on a command in the left panel to see its documentation","help"),s("  - Press Tab to autocomplete commands","help"),s("  - Add --help to any command to see its usage","help")},ne=n=>{const e=n.replace(/^\$\s+/,"").replace(/^wp\s+/,"");p.value=e};return oe(()=>{Q()}),(n,e)=>(a(),o(b,null,[i("div",ve,[i("div",he,[i("div",fe,[i("div",ge,[u(v,{icon:"search",class:"absolute left-5 top-1/2 -translate-y-1/2 text-zinc-500"}),N(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),placeholder:n.__("Search commands...","snipvault"),class:"px-6 py-4 pl-12 w-full bg-white dark:bg-zinc-900 focus:outline-0 grow"},null,8,be),[[G,x.value]])]),i("div",ye,[K.value?(a(),o("div",xe,[u(v,{icon:"refresh",class:"animate-spin inline-block mr-2"}),C(" "+l(n.__("Loading commands...","snipvault")),1)])):E.value.length===0?(a(),o("div",ke,l(x.value?n.__("No matching commands found","snipvault"):n.__("No commands available","snipvault")),1)):(a(),o("div",Ce,[(a(!0),o(b,null,W(E.value,t=>(a(),o("div",{key:t,onClick:d=>Z(t),class:"px-4 py-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 cursor-pointer border-b border-zinc-100 dark:border-zinc-800 flex items-center"},[u(v,{icon:"terminal",class:"mr-2 text-zinc-400"}),i("span",{innerHTML:t.command},null,8,Pe)],8,Le))),128))]))])])]),i("div",ze,[r.value?(a(),o("div",We,[i("div",De,[i("h2",Me,l(r.value.name),1),u(S,{onClick:e[1]||(e[1]=t=>r.value=null),type:"transparent"},{default:I(()=>[u(v,{icon:"close"})]),_:1})]),r.value.loading?(a(),o("div",Te,[u(v,{icon:"refresh",class:"animate-spin inline-block mr-2"}),C(" "+l(n.__("Loading documentation...","snipvault")),1)])):(a(),o("div",Ie,[r.value.description?(a(),o("div",Se,[i("p",null,l(r.value.description),1)])):_("",!0),r.value.usage?(a(),o("div",$e,[i("h3",Ee,l(n.__("Usage:","snipvault")),1),i("div",Ae,l(r.value.usage),1)])):_("",!0),r.value.options&&r.value.options.length>0?(a(),o("div",Re,[i("h3",Ue,l(n.__("Options:","snipvault")),1),i("div",He,[(a(!0),o(b,null,W(r.value.options,t=>(a(),o("div",{key:t.name,class:"mb-1"},[i("span",je,l(t.name),1),i("span",null,l(t.description),1)]))),128))])])):_("",!0),r.value.examples&&r.value.examples.length>0?(a(),o("div",Fe,[i("h3",Ne,l(n.__("Examples:","snipvault")),1),i("div",Ge,[(a(!0),o(b,null,W(r.value.examples,(t,d)=>(a(),o("div",{key:d,class:"flex items-center mb-1 hover:bg-zinc-200 dark:hover:bg-zinc-700 p-1 rounded cursor-pointer",onClick:m=>ne(t)},[i("span",null,l(t),1),u(v,{icon:"play",class:"ml-2 text-green-500"})],8,Be))),128))])])):_("",!0),i("div",Oe,[u(S,{type:"primary",onClick:e[2]||(e[2]=t=>T(r.value.name))},{default:I(()=>[C(l(n.__("Run Command","snipvault")),1)]),_:1})])]))])):_("",!0),i("div",Ve,[i("div",{ref_key:"terminalElement",ref:z,class:"flex-grow overflow-y-auto p-4 font-mono text-sm bg-zinc-900 text-zinc-200"},[y.value?_("",!0):(a(),o("div",qe,l(n.__("CLI interface is not activated","snipvault")),1)),(a(!0),o(b,null,W(M.value,t=>(a(),o("div",{key:t.id,class:"mb-1"},[i("span",{class:ce({"text-green-400":t.type==="command","text-red-400":t.type==="error","text-blue-400":t.type==="info","text-yellow-400":t.type==="help","text-purple-400":t.type==="system","text-green-300":t.type==="success"})},[t.type==="command"?(a(),o(b,{key:0},[C(l(t.text),1)],64)):(a(),o("pre",{key:1,innerHTML:t.text},null,8,Ke))],2)]))),128)),P.value?(a(),o("div",Qe,[u(v,{icon:"refresh",class:"animate-spin inline-block mr-2"}),i("span",null,l(n.__("Processing...","snipvault")),1)])):_("",!0)],512),i("div",Je,[Xe,N(i("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t),type:"text",onKeydown:X,placeholder:n.__("Type a command...","snipvault"),class:"bg-transparent border-none outline-none flex-grow text-zinc-200 font-mono",disabled:!y.value},null,40,Ye),[[G,p.value]]),u(S,{type:"primary",onClick:T,disabled:!y.value||P.value||!p.value.trim()},{default:I(()=>[C(l(n.__("Run","snipvault")),1)]),_:1},8,["disabled"])])])])]),u(we,{ref_key:"confirm",ref:D},null,512)],64))}},ln=te(Ze,[["__scopeId","data-v-1e2b3605"]]);export{ln as default};
//# sourceMappingURL=index-UKbGMgwV.js.map
