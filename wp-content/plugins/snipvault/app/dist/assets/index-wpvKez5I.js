import{e as f,u as P,a as V,c as $,q as H,r as L,g as l,o as a,j as e,t as u,A as j,i as o,B,p as s,_ as h,F as x,w,k as y,v as S,s as I,x as T,n as C,E as M}from"../app.build.DVcfFWU_.js";import{n as N}from"./notify-CXlPex_L.js";const z=f([]);f("");const m=f(null),g=f(!1),t=f({per_page:20,page:1,search:"",total:0,total_pages:0});let v;const b=async()=>{v||(v=P()),v.updateState("loading",!0),g.value=!0;const k=new URLSearchParams({per_page:t.value.per_page,page:t.value.page,search:t.value.search}),p={headers:{Accept:"application/json"}};m.value&&(p.signal=m.value.signal);try{const i=`https://snips.snipvault.co/wp-json/wp/v2/snippets?${k.toString()}`,r=await fetch(i,p);if(v.updateState("loading",!1),g.value=!1,!r||!r.ok)return;t.value.total_pages=parseInt(r.headers.get("X-WP-TotalPages"),10),t.value.total=parseInt(r.headers.get("X-WP-Total"),10);const _=await r.json();z.value=[..._]}catch(i){v.updateState("loading",!1),g.value=!1,i.name==="AbortError"||N({title:i.name,message:i.message,type:"error"})}},D={class:"flex flex-col h-full max-h-full overflow-hidden relative"},E={class:"p-3 border-b border-zinc-200 dark:border-zinc-700 text-center bg-white dark:bg-zinc-900 transition-all cursor-pointer flex flex-row items-center gap-2 shrink-0",style:{"min-height":"57px"}},J={class:"flex flex-row items-center gap-3 grow pl-2 place-content-between"},q={class:"relative w-full border-b border-zinc-200 dark:border-zinc-700"},F=["placeholder"],U={class:"relative w-full border-b border-zinc-200 dark:border-zinc-700 flex flex-row px-5 py-2 pr-3 items-center"},W={class:"text-xs text-zinc-500 dark:text-zinc-400 grow"},X={class:"flex flex-row items-center"},G={class:"text-xs text-zinc-500 dark:text-zinc-400 grow mr-2"},K=e("div",{class:"grow"},[e("div",{class:"w-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 h-4 animate-pulse"})],-1),O=e("div",{class:"w-8 rounded-lg bg-zinc-100 dark:bg-zinc-800 h-4 animate-pulse mr-2"},null,-1),Q=e("div",{class:"w-8 rounded-lg bg-zinc-100 dark:bg-zinc-800 h-4 animate-pulse mr-2"},null,-1),Y={key:0,class:"flex flex-col gap-2 p-3 px-5"},Z=e("div",{class:"w-full rounded-lg bg-zinc-100 dark:bg-zinc-800 h-10 animate-pulse"},null,-1),ee=[Z],te={key:1,class:"flex flex-col grow overflow-auto shrink p-3"},se={class:"flex flex-row items-center w-full gap-2"},ae={class:"flex flex-col grow gap-1 max-w-full overflow-hidden"},ne={class:"flex flex-row gap-3 items-center"},le=["innerHTML"],re={key:0,class:"text-sm text-center text-zinc-500 dark:text-zinc-400 px-6 py-6"},oe={__name:"index",setup(k){P();const p=V();$(),f([{label:"PHP",open:!0,value:"PHP"},{label:"JavaScript",open:!0,value:"JAVASCRIPT"},{label:"css",open:!0,value:"CSS"},{label:"scss",open:!0,value:"SCSS"},{label:"html",open:!0,value:"HTML"}]);const i=n=>n.meta.snippet_language?n.meta.snippet_language.toLowerCase():"file",r=n=>{const c=n.meta.snippet_language;return c=="PHP"?"text-indigo-400":c=="JAVASCRIPT"?"text-amber-400":c=="CSS"?"text-sky-400":c=="SCSS"?"text-pink-400":c=="HTML"?"text-orange-400":"text-sky-400"},_=()=>{t.value.page--,b()},A=()=>{t.value.page++,b()};return b(),H(()=>t.value.search,()=>{t.value.page=1,m.value&&m.value.abort(),m.value=new AbortController,b()}),(n,c)=>{const R=L("RouterLink");return a(),l("div",D,[e("div",E,[e("div",J,[e("span",null,u(n.__("Library","snipvault")),1)])]),e("div",q,[j(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>s(t).search=d),placeholder:n.__("Search snippets...","snipvault"),class:"px-6 py-4 pl-12 w-full bg-white dark:bg-zinc-900 focus:outline-0"},null,8,F),[[B,s(t).search]]),o(h,{icon:"search",class:"absolute left-5 top-1/2 -translate-y-1/2 text-zinc-500"})]),e("div",U,[s(g)?(a(),l(x,{key:1},[K,O,Q],64)):(a(),l(x,{key:0},[e("div",W,u(s(t).total)+" "+u(n.__("results","snipvault")),1),e("div",X,[e("div",G,u(s(t).page)+" "+u(n.__("of","snipvault"))+" "+u(s(t).total_pages),1),o(y,{type:"transparent",onClick:_,disabled:s(t).page<=1},{default:w(()=>[o(h,{icon:"chevron_left"})]),_:1},8,["disabled"]),o(y,{type:"transparent",onClick:A,disabled:s(t).page>=s(t).total_pages},{default:w(()=>[o(h,{icon:"chevron_right"})]),_:1},8,["disabled"])])],64))]),s(g)?(a(),l("div",Y,[(a(),l(x,null,S(4,d=>e("div",null,ee)),64))])):(a(),l("div",te,[(a(!0),l(x,null,S(s(z),(d,ue)=>(a(),T(R,{to:`/library/${d.id}`,class:C(["flex flex-row px-2 py-2 pr-4 cursor-pointer transition-all group relative rounded-lg",d.id==s(p).params.id?"text-zinc-900 dark:text-zinc-100 bg-zinc-100 dark:bg-zinc-800":"hover:text-zinc-900 hover:dark:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800"])},{default:w(()=>[e("div",se,[e("div",ae,[e("div",ne,[e("div",{class:C(["aspect-square h-6 rounded-md flex flex-col justify-center items-center bg-zinc-100 dark:bg-zinc-800",r(d)])},[o(h,{icon:i(d),class:"text-xl"},null,8,["icon"])],2),e("div",{class:"truncate grow text-sm",innerHTML:d.title.rendered},null,8,le)])])])]),_:2},1032,["to","class"]))),256)),!s(z).length&&!s(g)?(a(),l("div",re,u(n.__("No snippets found. Try a different search.","snipvault")),1)):I("",!0)]))])}}},ie={class:"w-[300px] border-r border-zinc-200 dark:border-zinc-700 h-full max-h-full shrink-0"},ce={class:"grow overflow-hidden"},de={key:1,class:"w-full h-full flex flex-col items-center justify-center p-16"},ge={__name:"index",setup(k){return(p,i)=>{const r=L("RouterView");return a(),l(x,null,[e("div",ie,[o(oe)]),e("div",ce,[o(r,null,{default:w(({Component:_})=>[_?(a(),T(M(_),{key:0})):(a(),l("div",de,[o(h,{icon:"code",style:{"font-size":"88px"}}),e("div",null,u(p.__("No snippet selected","snipvault")),1)]))]),_:1})])],64)}}};export{ge as default};
//# sourceMappingURL=index-wpvKez5I.js.map
