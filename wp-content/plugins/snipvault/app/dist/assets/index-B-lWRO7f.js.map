{"version":3,"file":"index-B-lWRO7f.js","sources":["../../src/components/app/library-snippet-inspect/src/constants.js","../../src/components/app/library-snippet-inspect/index.vue"],"sourcesContent":["import { ref } from \"vue\";\n\nexport const snippet = ref(null);\nexport const codeeditor = ref(null);\n","<script setup>\nimport { ref, watchEffect, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { getSnippets } from \"@/components/app/snippets-list/src/getSnippets.js\";\n\n// Components\nimport CodeEditor from \"@/components/app/code-editor/index.vue\";\nimport AppSelect from \"@/components/utility/select/index.vue\";\nimport AppButton from \"@/components/utility/app-button/index.vue\";\nimport AppIcon from \"@/components/utility/icons/index.vue\";\nimport AppInput from \"@/components/utility/text-input/index.vue\";\nimport AppTextArea from \"@/components/utility/text-area/index.vue\";\nimport AppToggle from \"@/components/utility/toggle/index.vue\";\n\n// Store\nimport { useAppStore } from \"@/store/app/app.js\";\nconst appStore = useAppStore();\n\n// Functions\nimport { lmnFetch } from \"@/assets/js/functions/lmnFetch.js\";\nimport { notify } from \"@/assets/js/functions/notify.js\";\n\n// Refs\nimport { snippet, codeeditor } from \"./src/constants.js\";\nconst showSettings = ref(true);\nconst showRevisions = ref(false);\nconst revisionsComp = ref(null);\nconst route = useRoute();\nconst router = useRouter();\nconst languageOptions = [\n  { value: \"PHP\", label: \"PHP\" },\n  { value: \"JAVASCRIPT\", label: \"Javascript\" },\n  { value: \"CSS\", label: \"CSS\" },\n];\n\nconst getSnippet = async () => {\n  appStore.updateState(\"loading\", true);\n\n  // Build query parameters\n  const params = new URLSearchParams({\n    //per_page: 100,\n    //page: 1,\n  });\n\n  // Fetch snippets\n  const response = await fetch(`https://snips.snipvault.co/wp-json/wp/v2/snippets/${route.params.id}?_embed`, {\n    headers: {\n      Accept: \"application/json\",\n    },\n  });\n\n  appStore.updateState(\"loading\", false);\n\n  // Something went wrong\n  if (!response) return;\n  if (!response.ok) return;\n\n  // Parse response\n  const remoteSnippets = await response.json();\n\n  snippet.value = remoteSnippets;\n\n  route.meta.name = snippet.value.title.rendered;\n};\n\nconst importSnippet = async (status) => {\n  appStore.updateState(\"loading\", true);\n\n  const title = snippet.value.title.rendered;\n  const meta = {\n    snippet_settings: {\n      description: snippet.value.content.rendered,\n      language: snippet.value.meta.snippet_language,\n    },\n    snippet_content: snippet.value.meta.snippet_code,\n  };\n  const data = { title, status, meta };\n\n  const args = { endpoint: \"wp/v2/svsnippets\", params: {}, type: \"POST\", data };\n  const response = await lmnFetch(args);\n\n  appStore.updateState(\"loading\", false);\n\n  //getSnippets();\n\n  // Something went wrong\n  if (!response) return;\n\n  notify({ type: \"success\", title: __(\"Snippet imported\", \"snipvault\") });\n};\n\nconst formatDate = (isoString) => {\n  // Parse the ISO string to a Date object\n  const date = new Date(isoString);\n\n  // Get user's locale from browser\n  const userLocale = navigator.language || \"en-US\";\n\n  // Create formatters for different parts\n  const dateFormatter = new Intl.DateTimeFormat(userLocale, {\n    dateStyle: \"medium\",\n    timeStyle: \"medium\",\n  });\n\n  // Format the date according to user's locale\n  return dateFormatter.format(date);\n};\n\nwatchEffect(() => {\n  if (route.params.id) getSnippet();\n});\n</script>\n\n<template>\n  <div class=\"flex flex-col w-full h-full\" v-if=\"snippet\" :key=\"snippet?.id\">\n    <div class=\"grow flex flex-row max-w-full overflow-hidden\">\n      <CodeEditor ref=\"codeeditor\" v-model=\"snippet.meta.snippet_code\" :language=\"snippet.meta.snippet_language\" class=\"grow shrink overflow-hidden\" />\n\n      <div class=\"border-l border-zinc-200 dark:border-zinc-700 w-[340px] shrink-0\">\n        <div class=\"col-span-3 flex flex-row place-content-between items-center p-6 border-b border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100\">\n          <div class=\"\" v-html=\"snippet.title.rendered\"></div>\n        </div>\n\n        <div class=\"flex flex-col gap-3 p-6\">\n          <div class=\"\" v-html=\"snippet.content.rendered\"></div>\n          <div class=\"text-sm text-zinc-500 dark:text-zinc-400\">{{ __(\"Last updated\", \"snipvault\") }}: {{ formatDate(snippet.modified) }}</div>\n\n          <div class=\"flex flex-row gap-3 mt-6\">\n            <AppButton type=\"default\" @click=\"importSnippet('draft')\" class=\"text-sm\">{{ __(\"Import\", \"snipvault\") }}</AppButton>\n            <AppButton type=\"default\" @click=\"importSnippet('publish')\" class=\"text-sm\">{{ __(\"Import and set active\", \"snipvault\") }}</AppButton>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n"],"names":["snippet","ref","codeeditor","appStore","useAppStore","route","useRoute","useRouter","getSnippet","response","remoteSnippets","importSnippet","status","title","meta","lmnFetch","notify","formatDate","isoString","date","userLocale","watchEffect"],"mappings":"2SAEO,MAAMA,EAAUC,EAAI,IAAI,EAClBC,EAAaD,EAAI,IAAI,6dCalC,MAAME,EAAWC,EAAY,EAQRH,EAAI,EAAI,EACPA,EAAI,EAAK,EACTA,EAAI,IAAI,EAC9B,MAAMI,EAAQC,EAAS,EACRC,EAAU,EAOzB,MAAMC,EAAa,SAAY,CACpBL,EAAA,YAAY,UAAW,EAAI,EAGrB,IAAI,gBAAgB,CAGlC,CAAA,EAGD,MAAMM,EAAW,MAAM,MAAM,qDAAqDJ,EAAM,OAAO,EAAE,UAAW,CAC1G,QAAS,CACP,OAAQ,kBAAA,CACV,CACD,EAMG,GAJKF,EAAA,YAAY,UAAW,EAAK,EAGjC,CAACM,GACD,CAACA,EAAS,GAAI,OAGZ,MAAAC,EAAiB,MAAMD,EAAS,KAAK,EAE3CT,EAAQ,MAAQU,EAEhBL,EAAM,KAAK,KAAOL,EAAQ,MAAM,MAAM,QACxC,EAEMW,EAAgB,MAAOC,GAAW,CAC7BT,EAAA,YAAY,UAAW,EAAI,EAE9B,MAAAU,EAAQb,EAAQ,MAAM,MAAM,SAC5Bc,EAAO,CACX,iBAAkB,CAChB,YAAad,EAAQ,MAAM,QAAQ,SACnC,SAAUA,EAAQ,MAAM,KAAK,gBAC/B,EACA,gBAAiBA,EAAQ,MAAM,KAAK,YACtC,EAIMS,EAAW,MAAMM,EADV,CAAE,SAAU,mBAAoB,OAAQ,GAAI,KAAM,OAAQ,KAF1D,CAAE,MAAAF,EAAO,OAAAD,EAAQ,KAAAE,CAAK,CAEyC,CACxC,EAE3BX,EAAA,YAAY,UAAW,EAAK,EAKhCM,GAEEO,EAAA,CAAE,KAAM,UAAW,SAAO,mBAAG,mBAAoB,WAAW,EAAG,CACxE,EAEMC,EAAcC,GAAc,CAE1B,MAAAC,EAAO,IAAI,KAAKD,CAAS,EAGzBE,EAAa,UAAU,UAAY,QASlC,OANe,IAAI,KAAK,eAAeA,EAAY,CACxD,UAAW,SACX,UAAW,QAAA,CACZ,EAGoB,OAAOD,CAAI,CAClC,EAEA,OAAAE,EAAY,IAAM,CACZhB,EAAM,OAAO,IAAeG,EAAA,CAAA,CACjC"}