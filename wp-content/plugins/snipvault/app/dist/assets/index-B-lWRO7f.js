import{e as r,u as x,J as h,g as S,s as k,p as s,j as n,i as c,t as d,w as m,k as f,a as y,c as b,o as z,D as _}from"../app.build.DVcfFWU_.js";import"./constants-OryjEDvQ.js";import{l as L}from"./lmnFetch-DeRrp9BG.js";import{_ as T}from"./index-CqlI0lnC.js";import{n as V}from"./notify-CXlPex_L.js";const e=r(null),D=r(null),$={class:"grow flex flex-row max-w-full overflow-hidden"},j={class:"border-l border-zinc-200 dark:border-zinc-700 w-[340px] shrink-0"},C={class:"col-span-3 flex flex-row place-content-between items-center p-6 border-b border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100"},F=["innerHTML"],H={class:"flex flex-col gap-3 p-6"},M=["innerHTML"],N={class:"text-sm text-zinc-500 dark:text-zinc-400"},B={class:"flex flex-row gap-3 mt-6"},O={__name:"index",setup(I){const l=x();r(!0),r(!1),r(null);const p=y();b();const v=async()=>{l.updateState("loading",!0),new URLSearchParams({});const a=await fetch(`https://snips.snipvault.co/wp-json/wp/v2/snippets/${p.params.id}?_embed`,{headers:{Accept:"application/json"}});if(l.updateState("loading",!1),!a||!a.ok)return;const t=await a.json();e.value=t,p.meta.name=e.value.title.rendered},u=async a=>{l.updateState("loading",!0);const t=e.value.title.rendered,o={snippet_settings:{description:e.value.content.rendered,language:e.value.meta.snippet_language},snippet_content:e.value.meta.snippet_code},w=await L({endpoint:"wp/v2/svsnippets",params:{},type:"POST",data:{title:t,status:a,meta:o}});l.updateState("loading",!1),w&&V({type:"success",title:(0,window.wp.i18n.__)("Snippet imported","snipvault")})},g=a=>{const t=new Date(a),o=navigator.language||"en-US";return new Intl.DateTimeFormat(o,{dateStyle:"medium",timeStyle:"medium"}).format(t)};return h(()=>{p.params.id&&v()}),(a,t)=>{var o;return s(e)?(z(),S("div",{class:"flex flex-col w-full h-full",key:(o=s(e))==null?void 0:o.id},[n("div",$,[c(T,{ref_key:"codeeditor",ref:D,modelValue:s(e).meta.snippet_code,"onUpdate:modelValue":t[0]||(t[0]=i=>s(e).meta.snippet_code=i),language:s(e).meta.snippet_language,class:"grow shrink overflow-hidden"},null,8,["modelValue","language"]),n("div",j,[n("div",C,[n("div",{class:"",innerHTML:s(e).title.rendered},null,8,F)]),n("div",H,[n("div",{class:"",innerHTML:s(e).content.rendered},null,8,M),n("div",N,d(a.__("Last updated","snipvault"))+": "+d(g(s(e).modified)),1),n("div",B,[c(f,{type:"default",onClick:t[1]||(t[1]=i=>u("draft")),class:"text-sm"},{default:m(()=>[_(d(a.__("Import","snipvault")),1)]),_:1}),c(f,{type:"default",onClick:t[2]||(t[2]=i=>u("publish")),class:"text-sm"},{default:m(()=>[_(d(a.__("Import and set active","snipvault")),1)]),_:1})])])])])])):k("",!0)}}};export{O as default};
//# sourceMappingURL=index-B-lWRO7f.js.map
