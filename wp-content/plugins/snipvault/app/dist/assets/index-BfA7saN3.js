import{u as ht,d as xn,r as Ue,h as Bt,m as Sn,a as nn,b as En,c as on,e as J,f as Mt,g as X,o as L,i as x,w as F,j as D,n as $e,_ as V,k as U,l as be,p as re,q as Tt,s as tt,t as pe,F as st,v as rn,x as Ot,y as Dn,z as Cn,A as Tn,B as On,C as In,T as kn,D as jt,M as An,E as Pn}from"../app.build.DVcfFWU_.js";import{l as an,f as Y,s as G,a as W,b as _e,c as lt,o as qe,d as Nn}from"./constants-OryjEDvQ.js";import{g as Ce}from"./getSnippets-DTpeouTX.js";import{l as ne}from"./lmnFetch-DeRrp9BG.js";import{_ as Yt}from"./index-CRgHs0Pg.js";import{_ as Fn}from"./index-BxFqpWTU.js";import{_ as $t}from"./index-Bt0YRkAh.js";import{n as Q}from"./notify-CXlPex_L.js";import{i as Ve}from"./inSearch-uRPV3sBV.js";import{_ as Mn}from"./index-Ak6w9NJ_.js";let Xt;const $n=async()=>{Xt||(Xt=ht());const e=await ne({endpoint:"wp/v2/svfolders",params:{status:"publish",per_page:100,context:"edit"}});an.value=!1,e&&(Y.value=e.data)};/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(n),!0).forEach(function(i){zn(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(e){return typeof e}:nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(t)}function zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function he(){return he=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},he.apply(this,arguments)}function Ln(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,r;for(r=0;r<i.length;r++)o=i[r],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Rn(t,e){if(t==null)return{};var n=Ln(t,e),i,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var Vn="1.14.0";function fe(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ge=fe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ge=fe(/Edge/i),Ut=fe(/firefox/i),Be=fe(/safari/i)&&!fe(/chrome/i)&&!fe(/android/i),sn=fe(/iP(ad|od|hone)/i),Bn=fe(/chrome/i)&&fe(/android/i),ln={capture:!1,passive:!1};function T(t,e,n){t.addEventListener(e,n,!ge&&ln)}function E(t,e,n){t.removeEventListener(e,n,!ge&&ln)}function ut(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function jn(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function se(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&ut(t,e):ut(t,e))||i&&t===n)return t;if(t===n)break}while(t=jn(t))}return null}var Gt=/\s+/g;function K(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Gt," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Gt," ")}}function y(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function Ae(t,e){var n="";if(typeof t=="string")n=t;else do{var i=y(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function un(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function le(){var t=document.scrollingElement;return t||document.documentElement}function $(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var r,a,s,l,d,c,u;if(t!==window&&t.parentNode&&t!==le()?(r=t.getBoundingClientRect(),a=r.top,s=r.left,l=r.bottom,d=r.right,c=r.height,u=r.width):(a=0,s=0,l=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!ge))do if(o&&o.getBoundingClientRect&&(y(o,"transform")!=="none"||n&&y(o,"position")!=="static")){var m=o.getBoundingClientRect();a-=m.top+parseInt(y(o,"border-top-width")),s-=m.left+parseInt(y(o,"border-left-width")),l=a+r.height,d=s+r.width;break}while(o=o.parentNode);if(i&&t!==window){var h=Ae(o||t),f=h&&h.a,w=h&&h.d;h&&(a/=w,s/=f,u/=f,c/=w,l=a+c,d=s+u)}return{top:a,left:s,bottom:l,right:d,width:u,height:c}}}function Wt(t,e,n){for(var i=ye(t,!0),o=$(t)[e];i;){var r=$(i)[n],a=void 0;if(a=o>=r,!a)return i;if(i===le())break;i=ye(i,!1)}return!1}function Pe(t,e,n,i){for(var o=0,r=0,a=t.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==b.ghost&&(i||a[r]!==b.dragged)&&se(a[r],n.draggable,t,!1)){if(o===e)return a[r];o++}r++}return null}function zt(t,e){for(var n=t.lastElementChild;n&&(n===b.ghost||y(n,"display")==="none"||e&&!ut(n,e));)n=n.previousElementSibling;return n||null}function te(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==b.clone&&(!e||ut(t,e))&&n++;return n}function Jt(t){var e=0,n=0,i=le();if(t)do{var o=Ae(t),r=o.a,a=o.d;e+=t.scrollLeft*r,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function Yn(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function ye(t,e){if(!t||!t.getBoundingClientRect)return le();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=y(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return le();if(i||e)return n;i=!0}}while(n=n.parentNode);return le()}function Xn(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function mt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var je;function dn(t,e){return function(){if(!je){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),je=setTimeout(function(){je=void 0},e)}}}function Hn(){clearTimeout(je),je=void 0}function cn(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function pn(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var ee="Sortable"+new Date().getTime();function Un(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(y(o,"display")==="none"||o===b.ghost)){t.push({target:o,rect:$(o)});var r=ue({},t[t.length-1].rect);if(o.thisAnimationDuration){var a=Ae(o,!0);a&&(r.top-=a.f,r.left-=a.e)}o.fromRect=r}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(Yn(t,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var r=!1,a=0;t.forEach(function(s){var l=0,d=s.target,c=d.fromRect,u=$(d),m=d.prevFromRect,h=d.prevToRect,f=s.rect,w=Ae(d,!0);w&&(u.top-=w.f,u.left-=w.e),d.toRect=u,d.thisAnimationDuration&&mt(m,u)&&!mt(c,u)&&(f.top-u.top)/(f.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=Wn(f,m,h,o.options)),mt(u,c)||(d.prevFromRect=c,d.prevToRect=u,l||(l=o.options.animation),o.animate(d,f,u,l)),l&&(r=!0,a=Math.max(a,l),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},l),d.thisAnimationDuration=l)}),clearTimeout(e),r?e=setTimeout(function(){typeof i=="function"&&i()},a):typeof i=="function"&&i(),t=[]},animate:function(i,o,r,a){if(a){y(i,"transition",""),y(i,"transform","");var s=Ae(this.el),l=s&&s.a,d=s&&s.d,c=(o.left-r.left)/(l||1),u=(o.top-r.top)/(d||1);i.animatingX=!!c,i.animatingY=!!u,y(i,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=Gn(i),y(i,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),y(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){y(i,"transition",""),y(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},a)}}}}function Gn(t){return t.offsetWidth}function Wn(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Te=[],vt={initializeByDefault:!0},We={mount:function(e){for(var n in vt)vt.hasOwnProperty(n)&&!(n in e)&&(e[n]=vt[n]);Te.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Te.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var r=e+"Global";Te.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][r]&&n[a.pluginName][r](ue({sortable:n},i)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](ue({sortable:n},i)))})},initializePlugins:function(e,n,i,o){Te.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var d=new s(e,n,e.options);d.sortable=e,d.options=e.options,e[l]=d,he(i,d.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var a=this.modifyOption(e,r,e.options[r]);typeof a<"u"&&(e.options[r]=a)}},getEventProperties:function(e,n){var i={};return Te.forEach(function(o){typeof o.eventProperties=="function"&&he(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return Te.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(o=r.optionListeners[n].call(e[r.pluginName],i))}),o}};function Jn(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,r=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,d=t.newIndex,c=t.oldDraggableIndex,u=t.newDraggableIndex,m=t.originalEvent,h=t.putSortable,f=t.extraEventProperties;if(e=e||n&&n[ee],!!e){var w,O=e.options,z="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!ge&&!Ge?w=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(i,!0,!0)),w.to=a||n,w.from=s||n,w.item=o||n,w.clone=r,w.oldIndex=l,w.newIndex=d,w.oldDraggableIndex=c,w.newDraggableIndex=u,w.originalEvent=m,w.pullMode=h?h.lastPutMode:void 0;var M=ue(ue({},f),We.getEventProperties(i,e));for(var q in M)w[q]=M[q];n&&n.dispatchEvent(w),O[z]&&O[z].call(e,w)}}var qn=["evt"],H=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,r=Rn(i,qn);We.pluginEvent.bind(b)(e,n,ue({dragEl:p,parentEl:A,ghostEl:S,rootEl:k,nextEl:De,lastDownEl:it,cloneEl:P,cloneHidden:we,dragStarted:ze,putSortable:R,activeSortable:b.active,originalEvent:o,oldIndex:ke,oldDraggableIndex:Ye,newIndex:Z,newDraggableIndex:ve,hideGhostForTarget:mn,unhideGhostForTarget:vn,cloneNowHidden:function(){we=!0},cloneNowShown:function(){we=!1},dispatchSortableEvent:function(s){j({sortable:n,name:s,originalEvent:o})}},r))};function j(t){Jn(ue({putSortable:R,cloneEl:P,targetEl:p,rootEl:k,oldIndex:ke,oldDraggableIndex:Ye,newIndex:Z,newDraggableIndex:ve},t))}var p,A,S,k,De,it,P,we,ke,Z,Ye,ve,Ke,R,Ie=!1,dt=!1,ct=[],Se,oe,wt,_t,qt,Kt,ze,Oe,Xe,He=!1,Ze=!1,ot,B,yt=[],It=!1,pt=[],gt=typeof document<"u",Qe=sn,Zt=Ge||ge?"cssFloat":"float",Kn=gt&&!Bn&&!sn&&"draggable"in document.createElement("div"),fn=function(){if(gt){if(ge)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),hn=function(e,n){var i=y(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=Pe(e,0,n),a=Pe(e,1,n),s=r&&y(r),l=a&&y(a),d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+$(r).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+$(a).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||d>=o&&i[Zt]==="none"||a&&i[Zt]==="none"&&d+c>o)?"vertical":"horizontal"},Zn=function(e,n,i){var o=i?e.left:e.top,r=i?e.right:e.bottom,a=i?e.width:e.height,s=i?n.left:n.top,l=i?n.right:n.bottom,d=i?n.width:n.height;return o===s||r===l||o+a/2===s+d/2},Qn=function(e,n){var i;return ct.some(function(o){var r=o[ee].options.emptyInsertThreshold;if(!(!r||zt(o))){var a=$(o),s=e>=a.left-r&&e<=a.right+r,l=n>=a.top-r&&n<=a.bottom+r;if(s&&l)return i=o}}),i},gn=function(e){function n(r,a){return function(s,l,d,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(r==null&&(a||u))return!0;if(r==null||r===!1)return!1;if(a&&r==="clone")return r;if(typeof r=="function")return n(r(s,l,d,c),a)(s,l,d,c);var m=(a?s:l).options.group.name;return r===!0||typeof r=="string"&&r===m||r.join&&r.indexOf(m)>-1}}var i={},o=e.group;(!o||nt(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},mn=function(){!fn&&S&&y(S,"display","none")},vn=function(){!fn&&S&&y(S,"display","")};gt&&document.addEventListener("click",function(t){if(dt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),dt=!1,!1},!0);var Ee=function(e){if(p){e=e.touches?e.touches[0]:e;var n=Qn(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[ee]._onDragOver(i)}}},ei=function(e){p&&p.parentNode[ee]._isOutsideThisEl(e.target)};function b(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=he({},e),t[ee]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&!Be,emptyInsertThreshold:5};We.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);gn(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:Kn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?T(t,"pointerdown",this._onTapStart):(T(t,"mousedown",this._onTapStart),T(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(t,"dragover",this),T(t,"dragenter",this)),ct.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),he(this,Un())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Oe=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,p):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,r=o.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(li(i),!p&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Be&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=se(l,o.draggable,i,!1),!(l&&l.animated)&&it!==l)){if(ke=te(l),Ye=te(l,o.draggable),typeof c=="function"){if(c.call(this,e,l,this)){j({sortable:n,rootEl:d,name:"filter",targetEl:l,toEl:i,fromEl:i}),H("filter",n,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=se(d,u.trim(),i,!1),u)return j({sortable:n,rootEl:u,name:"filter",targetEl:l,fromEl:i,toEl:i}),H("filter",n,{evt:e}),!0}),c)){r&&e.cancelable&&e.preventDefault();return}o.handle&&!se(d,o.handle,i,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,i){var o=this,r=o.el,a=o.options,s=r.ownerDocument,l;if(i&&!p&&i.parentNode===r){var d=$(i);if(k=r,p=i,A=p.parentNode,De=p.nextSibling,it=i,Ke=a.group,b.dragged=p,Se={target:p,clientX:(n||e).clientX,clientY:(n||e).clientY},qt=Se.clientX-d.left,Kt=Se.clientY-d.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,p.style["will-change"]="all",l=function(){if(H("delayEnded",o,{evt:e}),b.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Ut&&o.nativeDraggable&&(p.draggable=!0),o._triggerDragStart(e,n),j({sortable:o,name:"choose",originalEvent:e}),K(p,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){un(p,c.trim(),bt)}),T(s,"dragover",Ee),T(s,"mousemove",Ee),T(s,"touchmove",Ee),T(s,"mouseup",o._onDrop),T(s,"touchend",o._onDrop),T(s,"touchcancel",o._onDrop),Ut&&this.nativeDraggable&&(this.options.touchStartThreshold=4,p.draggable=!0),H("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Ge||ge))){if(b.eventCanceled){this._onDrop();return}T(s,"mouseup",o._disableDelayedDrag),T(s,"touchend",o._disableDelayedDrag),T(s,"touchcancel",o._disableDelayedDrag),T(s,"mousemove",o._delayedDragTouchMoveHandler),T(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&T(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){p&&bt(p),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;E(e,"mouseup",this._disableDelayedDrag),E(e,"touchend",this._disableDelayedDrag),E(e,"touchcancel",this._disableDelayedDrag),E(e,"mousemove",this._delayedDragTouchMoveHandler),E(e,"touchmove",this._delayedDragTouchMoveHandler),E(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):n?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(p,"dragend",this),T(k,"dragstart",this._onDragStart));try{document.selection?rt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Ie=!1,k&&p){H("dragStarted",this,{evt:n}),this.nativeDraggable&&T(document,"dragover",ei);var i=this.options;!e&&K(p,i.dragClass,!1),K(p,i.ghostClass,!0),b.active=this,e&&this._appendGhost(),j({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(oe){this._lastX=oe.clientX,this._lastY=oe.clientY,mn();for(var e=document.elementFromPoint(oe.clientX,oe.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(oe.clientX,oe.clientY),e!==n);)n=e;if(p.parentNode[ee]._isOutsideThisEl(e),n)do{if(n[ee]){var i=void 0;if(i=n[ee]._onDragOver({clientX:oe.clientX,clientY:oe.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);vn()}},_onTouchMove:function(e){if(Se){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,r=e.touches?e.touches[0]:e,a=S&&Ae(S,!0),s=S&&a&&a.a,l=S&&a&&a.d,d=Qe&&B&&Jt(B),c=(r.clientX-Se.clientX+o.x)/(s||1)+(d?d[0]-yt[0]:0)/(s||1),u=(r.clientY-Se.clientY+o.y)/(l||1)+(d?d[1]-yt[1]:0)/(l||1);if(!b.active&&!Ie){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(S){a?(a.e+=c-(wt||0),a.f+=u-(_t||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var m="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");y(S,"webkitTransform",m),y(S,"mozTransform",m),y(S,"msTransform",m),y(S,"transform",m),wt=c,_t=u,oe=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!S){var e=this.options.fallbackOnBody?document.body:k,n=$(p,!0,Qe,!0,e),i=this.options;if(Qe){for(B=e;y(B,"position")==="static"&&y(B,"transform")==="none"&&B!==document;)B=B.parentNode;B!==document.body&&B!==document.documentElement?(B===document&&(B=le()),n.top+=B.scrollTop,n.left+=B.scrollLeft):B=le(),yt=Jt(B)}S=p.cloneNode(!0),K(S,i.ghostClass,!1),K(S,i.fallbackClass,!0),K(S,i.dragClass,!0),y(S,"transition",""),y(S,"transform",""),y(S,"box-sizing","border-box"),y(S,"margin",0),y(S,"top",n.top),y(S,"left",n.left),y(S,"width",n.width),y(S,"height",n.height),y(S,"opacity","0.8"),y(S,"position",Qe?"absolute":"fixed"),y(S,"zIndex","100000"),y(S,"pointerEvents","none"),b.ghost=S,e.appendChild(S),y(S,"transform-origin",qt/parseInt(S.style.width)*100+"% "+Kt/parseInt(S.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,r=i.options;if(H("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}H("setupClone",this),b.eventCanceled||(P=pn(p),P.draggable=!1,P.style["will-change"]="",this._hideClone(),K(P,this.options.chosenClass,!1),b.clone=P),i.cloneId=rt(function(){H("clone",i),!b.eventCanceled&&(i.options.removeCloneOnHide||k.insertBefore(P,p),i._hideClone(),j({sortable:i,name:"clone"}))}),!n&&K(p,r.dragClass,!0),n?(dt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(E(document,"mouseup",i._onDrop),E(document,"touchend",i._onDrop),E(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(i,o,p)),T(document,"drop",i),y(p,"transform","translateZ(0)")),Ie=!0,i._dragStartId=rt(i._dragStarted.bind(i,n,e)),T(document,"selectstart",i),ze=!0,Be&&y(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,r,a,s=this.options,l=s.group,d=b.active,c=Ke===l,u=s.sort,m=R||d,h,f=this,w=!1;if(It)return;function O(Me,yn){H(Me,f,ue({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:a,dragRect:o,targetRect:r,canSort:u,fromSortable:m,target:i,completed:M,onMove:function(Vt,bn){return et(k,n,p,o,Vt,$(Vt),e,bn)},changed:q},yn))}function z(){O("dragOverAnimationCapture"),f.captureAnimationState(),f!==m&&m.captureAnimationState()}function M(Me){return O("dragOverCompleted",{insertion:Me}),Me&&(c?d._hideClone():d._showClone(f),f!==m&&(K(p,R?R.options.ghostClass:d.options.ghostClass,!1),K(p,s.ghostClass,!0)),R!==f&&f!==b.active?R=f:f===b.active&&R&&(R=null),m===f&&(f._ignoreWhileAnimating=i),f.animateAll(function(){O("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===p&&!p.animated||i===n&&!i.animated)&&(Oe=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(p.parentNode[ee]._isOutsideThisEl(e.target),!Me&&Ee(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function q(){Z=te(p),ve=te(p,s.draggable),j({sortable:f,name:"change",toEl:n,newIndex:Z,newDraggableIndex:ve,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=se(i,s.draggable,n,!0),O("dragOver"),b.eventCanceled)return w;if(p.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||f._ignoreWhileAnimating===i)return M(!1);if(dt=!1,d&&!s.disabled&&(c?u||(a=A!==k):R===this||(this.lastPutMode=Ke.checkPull(this,d,p,e))&&l.checkPut(this,d,p,e))){if(h=this._getDirection(e,i)==="vertical",o=$(p),O("dragOverValid"),b.eventCanceled)return w;if(a)return A=k,z(),this._hideClone(),O("revert"),b.eventCanceled||(De?k.insertBefore(p,De):k.appendChild(p)),M(!0);var ie=zt(n,s.draggable);if(!ie||oi(e,h,this)&&!ie.animated){if(ie===p)return M(!1);if(ie&&n===e.target&&(i=ie),i&&(r=$(i)),et(k,n,p,o,i,r,e,!!i)!==!1)return z(),n.appendChild(p),A=n,q(),M(!0)}else if(ie&&ii(e,h,this)){var v=Pe(n,0,s,!0);if(v===p)return M(!1);if(i=v,r=$(i),et(k,n,p,o,i,r,e,!1)!==!1)return z(),n.insertBefore(p,v),A=n,q(),M(!0)}else if(i.parentNode===n){r=$(i);var g=0,_,I=p.parentNode!==n,C=!Zn(p.animated&&p.toRect||o,i.animated&&i.toRect||r,h),de=h?"top":"left",ae=Wt(i,"top","top")||Wt(p,"top","top"),Ne=ae?ae.scrollTop:void 0;Oe!==i&&(_=r[de],He=!1,Ze=!C&&s.invertSwap||I),g=ri(e,i,r,h,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ze,Oe===i);var ce;if(g!==0){var xe=te(p);do xe-=g,ce=A.children[xe];while(ce&&(y(ce,"display")==="none"||ce===S))}if(g===0||ce===i)return M(!1);Oe=i,Xe=g;var Fe=i.nextElementSibling,me=!1;me=g===1;var Je=et(k,n,p,o,i,r,e,me);if(Je!==!1)return(Je===1||Je===-1)&&(me=Je===1),It=!0,setTimeout(ni,30),z(),me&&!Fe?n.appendChild(p):i.parentNode.insertBefore(p,me?Fe:i),ae&&cn(ae,0,Ne-ae.scrollTop),A=p.parentNode,_!==void 0&&!Ze&&(ot=Math.abs(_-$(i)[de])),q(),M(!0)}if(n.contains(p))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){E(document,"mousemove",this._onTouchMove),E(document,"touchmove",this._onTouchMove),E(document,"pointermove",this._onTouchMove),E(document,"dragover",Ee),E(document,"mousemove",Ee),E(document,"touchmove",Ee)},_offUpEvents:function(){var e=this.el.ownerDocument;E(e,"mouseup",this._onDrop),E(e,"touchend",this._onDrop),E(e,"pointerup",this._onDrop),E(e,"touchcancel",this._onDrop),E(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(Z=te(p),ve=te(p,i.draggable),H("drop",this,{evt:e}),A=p&&p.parentNode,Z=te(p),ve=te(p,i.draggable),b.eventCanceled){this._nulling();return}Ie=!1,Ze=!1,He=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kt(this.cloneId),kt(this._dragStartId),this.nativeDraggable&&(E(document,"drop",this),E(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Be&&y(document.body,"user-select",""),y(p,"transform",""),e&&(ze&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),S&&S.parentNode&&S.parentNode.removeChild(S),(k===A||R&&R.lastPutMode!=="clone")&&P&&P.parentNode&&P.parentNode.removeChild(P),p&&(this.nativeDraggable&&E(p,"dragend",this),bt(p),p.style["will-change"]="",ze&&!Ie&&K(p,R?R.options.ghostClass:this.options.ghostClass,!1),K(p,this.options.chosenClass,!1),j({sortable:this,name:"unchoose",toEl:A,newIndex:null,newDraggableIndex:null,originalEvent:e}),k!==A?(Z>=0&&(j({rootEl:A,name:"add",toEl:A,fromEl:k,originalEvent:e}),j({sortable:this,name:"remove",toEl:A,originalEvent:e}),j({rootEl:A,name:"sort",toEl:A,fromEl:k,originalEvent:e}),j({sortable:this,name:"sort",toEl:A,originalEvent:e})),R&&R.save()):Z!==ke&&Z>=0&&(j({sortable:this,name:"update",toEl:A,originalEvent:e}),j({sortable:this,name:"sort",toEl:A,originalEvent:e})),b.active&&((Z==null||Z===-1)&&(Z=ke,ve=Ye),j({sortable:this,name:"end",toEl:A,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){H("nulling",this),k=p=A=S=De=P=it=we=Se=oe=ze=Z=ve=ke=Ye=Oe=Xe=R=Ke=b.dragged=b.ghost=b.clone=b.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=wt=_t=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":p&&(this._onDragOver(e),ti(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,r=i.length,a=this.options;o<r;o++)n=i[o],se(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||si(n));return e},sort:function(e,n){var i={},o=this.el;this.toArray().forEach(function(r,a){var s=o.children[a];se(s,this.options.draggable,o,!1)&&(i[r]=s)},this),n&&this.captureAnimationState(),e.forEach(function(r){i[r]&&(o.removeChild(i[r]),o.appendChild(i[r]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return se(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=We.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&gn(i)},destroy:function(){H("destroy",this);var e=this.el;e[ee]=null,E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart),E(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ct.splice(ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!we){if(H("hideClone",this),b.eventCanceled)return;y(P,"display","none"),this.options.removeCloneOnHide&&P.parentNode&&P.parentNode.removeChild(P),we=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(we){if(H("showClone",this),b.eventCanceled)return;p.parentNode==k&&!this.options.group.revertClone?k.insertBefore(P,p):De?k.insertBefore(P,De):k.appendChild(P),this.options.group.revertClone&&this.animate(p,P),y(P,"display",""),we=!1}}};function ti(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function et(t,e,n,i,o,r,a,s){var l,d=t[ee],c=d.options.onMove,u;return window.CustomEvent&&!ge&&!Ge?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=o||e,l.relatedRect=r||$(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),c&&(u=c.call(d,l,a)),u}function bt(t){t.draggable=!1}function ni(){It=!1}function ii(t,e,n){var i=$(Pe(n.el,0,n.options,!0)),o=10;return e?t.clientX<i.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<i.top-o||t.clientY<i.bottom&&t.clientX<i.left}function oi(t,e,n){var i=$(zt(n.el,n.options.draggable)),o=10;return e?t.clientX>i.right+o||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+o}function ri(t,e,n,i,o,r,a,s){var l=i?t.clientY:t.clientX,d=i?n.height:n.width,c=i?n.top:n.left,u=i?n.bottom:n.right,m=!1;if(!a){if(s&&ot<d*o){if(!He&&(Xe===1?l>c+d*r/2:l<u-d*r/2)&&(He=!0),He)m=!0;else if(Xe===1?l<c+ot:l>u-ot)return-Xe}else if(l>c+d*(1-o)/2&&l<u-d*(1-o)/2)return ai(e)}return m=m||a,m&&(l<c+d*r/2||l>u-d*r/2)?l>c+d/2?1:-1:0}function ai(t){return te(p)<te(t)?1:-1}function si(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function li(t){pt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&pt.push(i)}}function rt(t){return setTimeout(t,0)}function kt(t){return clearTimeout(t)}gt&&T(document,"touchmove",function(t){(b.active||Ie)&&t.cancelable&&t.preventDefault()});b.utils={on:T,off:E,css:y,find:un,is:function(e,n){return!!se(e,n,e,!1)},extend:Xn,throttle:dn,closest:se,toggleClass:K,clone:pn,index:te,nextTick:rt,cancelNextTick:kt,detectDirection:hn,getChild:Pe};b.get=function(t){return t[ee]};b.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(b.utils=ue(ue({},b.utils),i.utils)),We.mount(i)})};b.create=function(t,e){return new b(t,e)};b.version=Vn;var N=[],Le,At,Pt=!1,xt,St,ft,Re;function ui(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):i.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):(E(document,"pointermove",this._handleFallbackAutoScroll),E(document,"touchmove",this._handleFallbackAutoScroll),E(document,"mousemove",this._handleFallbackAutoScroll)),Qt(),at(),Hn()},nulling:function(){ft=At=Le=Pt=Re=xt=St=null,N.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,a);if(ft=n,i||this.options.forceAutoScrollFallback||Ge||ge||Be){Et(n,this.options,s,i);var l=ye(s,!0);Pt&&(!Re||r!==xt||a!==St)&&(Re&&Qt(),Re=setInterval(function(){var d=ye(document.elementFromPoint(r,a),!0);d!==l&&(l=d,at()),Et(n,o.options,d,i)},10),xt=r,St=a)}else{if(!this.options.bubbleScroll||ye(s,!0)===le()){at();return}Et(n,this.options,ye(s,!1),!1)}}},he(t,{pluginName:"scroll",initializeByDefault:!0})}function at(){N.forEach(function(t){clearInterval(t.pid)}),N=[]}function Qt(){clearInterval(Re)}var Et=dn(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=le(),d=!1,c;At!==n&&(At=n,at(),Le=e.scroll,c=e.scrollFn,Le===!0&&(Le=ye(n,!0)));var u=0,m=Le;do{var h=m,f=$(h),w=f.top,O=f.bottom,z=f.left,M=f.right,q=f.width,ie=f.height,v=void 0,g=void 0,_=h.scrollWidth,I=h.scrollHeight,C=y(h),de=h.scrollLeft,ae=h.scrollTop;h===l?(v=q<_&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),g=ie<I&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(v=q<_&&(C.overflowX==="auto"||C.overflowX==="scroll"),g=ie<I&&(C.overflowY==="auto"||C.overflowY==="scroll"));var Ne=v&&(Math.abs(M-o)<=a&&de+q<_)-(Math.abs(z-o)<=a&&!!de),ce=g&&(Math.abs(O-r)<=a&&ae+ie<I)-(Math.abs(w-r)<=a&&!!ae);if(!N[u])for(var xe=0;xe<=u;xe++)N[xe]||(N[xe]={});(N[u].vx!=Ne||N[u].vy!=ce||N[u].el!==h)&&(N[u].el=h,N[u].vx=Ne,N[u].vy=ce,clearInterval(N[u].pid),(Ne!=0||ce!=0)&&(d=!0,N[u].pid=setInterval((function(){i&&this.layer===0&&b.active._onTouchMove(ft);var Fe=N[this.layer].vy?N[this.layer].vy*s:0,me=N[this.layer].vx?N[this.layer].vx*s:0;typeof c=="function"&&c.call(b.dragged.parentNode[ee],me,Fe,t,ft,N[this.layer].el)!=="continue"||cn(N[this.layer].el,me,Fe)}).bind({layer:u}),24))),u++}while(e.bubbleScroll&&m!==l&&(m=ye(m,!1)));Pt=d}},30),wn=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,r=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var d=i||r;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(c.clientX,c.clientY);l(),d&&!d.el.contains(u)&&(a("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function Lt(){}Lt.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=Pe(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:wn};he(Lt,{pluginName:"revertOnSpill"});function Rt(){}Rt.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:wn};he(Rt,{pluginName:"removeOnSpill"});b.mount(new ui);b.mount(Rt,Lt);function di(){return typeof window<"u"?window.console:global.console}const ci=di();function pi(t){const e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}const fi=/-(\w)/g,en=pi(t=>t.replace(fi,(e,n)=>n?n.toUpperCase():""));function Dt(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function tn(t,e,n){const i=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,i)}function hi(t,e){return Object.values(t).indexOf(e)}function gi(t,e,n,i){if(!t)return[];const o=Object.values(t),r=e.length-i;return[...e].map((s,l)=>l>=r?o.length:o.indexOf(s))}function _n(t,e){this.$nextTick(()=>this.$emit(t.toLowerCase(),e))}function mi(t){return e=>{this.realList!==null&&this["onDrag"+t](e),_n.call(this,t,e)}}function vi(t){return["transition-group","TransitionGroup"].includes(t)}function wi(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?vi(e.name):!1}function _i(t,e){return e?{...e.props,...e.attrs}:t}const Nt=["Start","Add","Remove","Update","End"],Ft=["Choose","Unchoose","Sort","Filter","Clone"],yi=["Move",...Nt,...Ft].map(t=>"on"+t);let Ct=null;const bi={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},xi=xn({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Nt.map(t=>t.toLowerCase()),...Ft.map(t=>t.toLowerCase())],props:bi,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const t=this.$slots.default?this.$slots.default():null,e=_i(this.$attrs,this.componentData);return t?(this.transitionMode=wi(t),Bt(this.getTag(),e,t)):Bt(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&ci.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};Nt.forEach(o=>{t["on"+o]=mi.call(this,o)}),Ft.forEach(o=>{t["on"+o]=_n.bind(this,o)});const e=Object.keys(this.$attrs).reduce((o,r)=>(o[en(r)]=this.$attrs[r],o),{}),n=Object.assign({},e,t,{onMove:(o,r)=>this.onDragMove(o,r)});!("draggable"in n)&&(n.draggable=">*");const i=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new b(i,n),i.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?Ue(this.component):this.tag},updateOptions(t){for(var e in t){const n=en(e);yi.indexOf(n)===-1&&this._sortable.option(n,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=gi(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(t){const e=hi(this.getChildrenNodes()||[],t);if(e===-1)return null;const n=this.realList[e];return{index:e,element:n}},emitChanges(t){this.$nextTick(()=>{this.$emit("change",t)})},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=i=>i.splice(e,0,i.splice(t,1)[0]);this.alterList(n)},getVmIndex(t){const e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[t].data=null;const n=this.getComponent();n.children=[],n.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),Ct=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;Dt(t.item);const n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();const i={element:e,newIndex:n};this.emitChanges({added:i})},onDragRemove(t){if(tn(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){Dt(t.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})},onDragUpdate(t){Dt(t.item),tn(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);const i={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:i})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const n=this.move;if(!n||!this.realList)return!0;const i=this.getRelatedContextFromMoveEvent(t),o=this.context,r=this.computeFutureIndex(i,t);Object.assign(o,{futureIndex:r});const a=Object.assign({},t,{relatedContext:i,draggedContext:o});return n(a,e)},onDragEnd(){this.computeIndexes(),Ct=null},getTrargetedComponent(t){return t.__draggable_component__},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getTrargetedComponent(t);if(!n)return{component:n};const i=n.realList,o={list:i,component:n};if(t!==e&&i&&n.getUnderlyingVm){const r=n.getUnderlyingVm(e);if(r)return Object.assign(r,o)}return o},computeFutureIndex(t,e){const n=[...e.to.children].filter(a=>a.style.display!=="none");if(n.length===0)return 0;const i=n.indexOf(e.related),o=t.component.getVmIndex(i);return n.indexOf(Ct)!==-1||!e.willInsertAfter?o:o+1}}}),Si={class:"flex flex-col overflow-auto shrink"},Ei={class:"flex flex-row items-center w-full"},Di={class:"flex flex-col grow gap-1 max-w-full overflow-hidden"},Ci={class:"flex flex-row gap-3 items-center"},Ti=["innerHTML"],Oi={class:"absolute flex flex-row items-center justify-end right-3 group-hover:bg-gradient-to-l from-zinc-100 dark:from-zinc-800 to-transparent w-3/4"},Ii={__name:"snippet",props:Sn(["parent"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ht(),n=nn(),i=En(t,"modelValue"),o=on(),r=J("");J(null);const a=J(null);J(null),J([]),J({plugin_name:(0,window.wp.i18n.__)("Custom plugin","snipvault"),plugin_author:"SnipVault",plugin_description:(0,window.wp.i18n.__)("Custom SnipVault plugin","snipvault")}),J([{label:"JavaScript",open:!0,value:"JAVASCRIPT"},{label:"PHP",open:!0,value:"PHP"},{label:"css",open:!0,value:"CSS"},{label:"scss",open:!0,value:"SCSS"},{label:"HTML",open:!0,value:"HTML"}]);const s=async h=>{e.updateState("loading",!0);const f=`${h.title.rendered} (copy)`,w={...h,title:f,status:"draft"};delete w.id;const z=await ne({endpoint:"wp/v2/svsnippets",params:{},type:"POST",data:w});Ce(),z&&(Q({type:"success",title:(0,window.wp.i18n.__)("Snippet duplicated","snipvault")}),await o.push(`/snippets/${z.data.id}`))},l=async(h,f)=>{if(!await a.value.show({title:(0,window.wp.i18n.__)("Are you sure?","snipvault"),message:(0,window.wp.i18n.__)("Are you sure you want to delete this snippet? ","snipvault"),okButton:(0,window.wp.i18n.__)("Yes delete it","snipvault")}))return;e.updateState("loading",!0);const w={endpoint:`wp/v2/svsnippets/${h}`,params:{force:!0},type:"DELETE"},O=await ne(w);Ce(),O&&(Q({type:"success",title:(0,window.wp.i18n.__)("Snippet deleted","snipvault")}),n.params.id==h&&await o.push("/"))},d=h=>{if(W.value.includes(h)){const f=W.value.findIndex(w=>w==h);W.value.splice(f,1)}else W.value.push(h)},c=h=>W.value.includes(h),u=h=>{var f,w;return(f=h.meta.snippet_settings)!=null&&f.language?(w=h.meta.snippet_settings)==null?void 0:w.language.toLowerCase():"file"},m=h=>{var w;const f=(w=h.meta.snippet_settings)==null?void 0:w.language;return f=="PHP"?"text-indigo-400":f=="JAVASCRIPT"?"text-amber-400":f=="CSS"?"text-sky-400":f=="SCSS"?"text-pink-400":f=="HTML"?"text-orange-400":"text-sky-400"};return Mt(()=>G.value.sort((h,f)=>f.status.localeCompare(h.status)).filter(h=>Ve(r.value,JSON.stringify(h)))),(h,f)=>{const w=Ue("RouterLink");return L(),X("div",Si,[x(w,{to:`/snippets/${i.value.id}`,class:$e(["flex flex-row px-2 py-2 pr-4 cursor-pointer transition-all group relative rounded-lg",i.value.id==re(n).params.id?"text-zinc-900 dark:text-zinc-100 bg-zinc-100 dark:bg-zinc-800":"hover:text-zinc-900 hover:dark:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800"])},{default:F(()=>[D("div",Ei,[D("div",Di,[D("div",Ci,[D("div",{class:$e(["aspect-square h-6 rounded-md flex flex-col justify-center items-center bg-zinc-100 dark:bg-zinc-800",m(i.value)])},[x(V,{icon:u(i.value),class:"text-xl"},null,8,["icon"])],2),D("div",{class:"truncate grow text-sm",innerHTML:i.value.title.rendered},null,8,Ti),D("div",{class:$e(["rounded-full w-1 h-1 shrink-0",i.value.status=="publish"?"bg-green-500":"bg-orange-500"])},null,2)])]),D("div",Oi,[x(U,{onClick:f[0]||(f[0]=be(O=>s(i.value),["stop","prevent"])),type:"transparent",class:"opacity-0 group-hover:opacity-100 transition-opacity text-lg"},{default:F(()=>[x(V,{icon:"copy"})]),_:1}),x(U,{onClick:f[1]||(f[1]=be(O=>l(i.value.id),["stop","prevent"])),type:"transparent",class:"opacity-0 group-hover:opacity-100 transition-opacity text-lg"},{default:F(()=>[x(V,{icon:"delete"})]),_:1}),D("div",{class:$e(["shrink-0 group-hover:opacity-100 transition-opacity flex flex-col justify-center ml-2",c(i.value.id)?"":"opacity-0"])},[x(Mn,{onClick:f[2]||(f[2]=be(O=>d(i.value.id),["stop","prevent"])),checked:re(W).includes(i.value.id)},null,8,["checked"])],2)])])]),_:1},8,["to","class"]),x($t,{ref_key:"confirm",ref:a},null,512)])}}},ki={key:0,class:"p-2 text-zinc-500 dark:text-zinc-400 text-sm"},Ai={key:0,class:"p-2 pl-8 text-zinc-500 dark:text-zinc-400 text-sm"},Pi=["onClick"],Ni={class:"flex flex-row gap-3 items-center"},Fi={class:"aspect-square h-6 flex flex-col justify-center items-center"},Mi=["innerHTML","onBlur"],$i={class:"absolute flex flex-row items-center justify-end right-3 group-hover:bg-gradient-to-l from-zinc-100 dark:from-zinc-800 to-transparent w-3/4 pointer-events-none"},zi=Object.assign({name:"Folders"},{__name:"folders",props:["parent"],setup(t){ht();const e=J([]),n=t,i=J(null),o=async(c,u)=>{const m=c.target.innerHTML.trim();if(!m||m==u.title.rendered)return;const h={...u,title:m};r(h,u)},r=async(c,u)=>{const m={endpoint:`wp/v2/svfolders/${u.id}`,params:{},type:"POST",data:c},h=await ne(m);if(!h)return;Q({type:"success",title:(0,window.wp.i18n.__)("Folder updated","snipvault")});let f=Y.value.findIndex(w=>w.id==u.id);f>=0&&(Y.value[f]=h.data)},a=async c=>{if(!await i.value.show({title:(0,window.wp.i18n.__)("Are you sure?","snipvault"),message:(0,window.wp.i18n.__)("Are you sure you want to delete this folder? ","snipvault"),okButton:(0,window.wp.i18n.__)("Yes delete it","snipvault")}))return;const m={endpoint:`wp/v2/svfolders/${c}`,params:{},type:"DELETE"};if(!await ne(m))return;Q({type:"success",title:(0,window.wp.i18n.__)("Folder deleted","snipvault")});const f=Y.value.findIndex(w=>w.id==c);f>=0&&Y.value.splice(f,1)},s=async c=>{c.added&&l(c)},l=async c=>{await Cn();const u=c.added.element.type;if(u==="snipvault-folders"){const m=e.value[c.added.newIndex];if(!m)return;const f={meta:{folder_parent:n.parent}},w=Y.value.find(O=>O.id==m.id);w&&(w.meta.folder_parent=n.parent),r(f,m)}if(u==="snipvault-snippets"){const m=c.added.element,h=m.meta.snippet_settings;h.folder=n.parent;const f={meta:{...m.meta,snippet_settings:h}},w={endpoint:`wp/v2/svsnippets/${m.id}`,params:{},data:f,type:"POST"};if(!await ne(w))return;const z=G.value.findIndex(M=>M.id==m.id);z>=0&&(G.value[z].meta.snippet_settings.folder=n.parent)}},d=c=>{lt.value=c.id;const u=qe.value.findIndex(m=>m==c.id);u>=0?qe.value.splice(u,1):qe.value.push(c.id)};return Mt(()=>G.value.sort((c,u)=>u.status.localeCompare(c.status)).filter(c=>Ve(_e.value,JSON.stringify(c)))),Tt([()=>Y.value,()=>G.value,()=>_e.value],()=>{const c=G.value.filter(u=>{var m;return((m=u.meta.snippet_settings)==null?void 0:m.folder)==n.parent&&Ve(_e.value,u.title.rendered)});e.value=Y.value.filter(u=>u.meta.folder_parent==n.parent&&Ve(_e.value,u.title.rendered)),e.value=[...e.value,...c]},{immediate:!0,deep:!0}),(c,u)=>{const m=Ue("AppButton"),h=Ue("Folders",!0);return L(),X("div",null,[e.value.length===0&&t.parent==0?(L(),X("div",ki,pe(c.__("No snippets found","snipvault")),1)):tt("",!0),x(re(xi),{group:{name:"folders",pull:!0,put:!0,revertClone:!1},list:e.value,animation:"300",sort:!1,onChange:s,emptyInsertThreshold:0},{default:F(()=>[e.value.length===0&&t.parent!==0?(L(),X("div",Ai,pe(c.__("Drag items here","snipvault")),1)):tt("",!0),(L(!0),X(st,null,rn(e.value,(f,w)=>(L(),X("div",{key:w},[f.type==="snipvault-folders"?(L(),X("div",{key:0,class:$e(["flex flex-row px-2 py-2 pr-4 cursor-pointer transition-all group relative rounded-lg",f.id==re(lt)?"text-zinc-900 dark:text-zinc-100 bg-zinc-100 dark:bg-zinc-800 mb-1":"hover:text-zinc-900 hover:dark:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800"]),onClick:O=>d(f)},[D("div",Ni,[D("div",Fi,[x(V,{icon:"folder",class:"text-xl text-zinc-200 dark:text-zinc-700"})]),D("div",{class:"truncate grow text-sm",contenteditable:!0,innerHTML:f.title.rendered,onBlur:O=>o(O,f),onKeydown:u[0]||(u[0]=Dn(be(O=>O.target.blur(),["prevent"]),["enter"])),onClick:u[1]||(u[1]=be(()=>{},["stop"]))},null,40,Mi),D("div",$i,[x(m,{onClick:be(O=>a(f.id),["stop","prevent"]),type:"transparent",class:"opacity-0 group-hover:opacity-100 transition-opacity text-lg pointer-events-auto"},{default:F(()=>[x(V,{icon:"delete"})]),_:2},1032,["onClick"])])])],10,Pi)):(L(),Ot(Ii,{key:1,modelValue:e.value[w],"onUpdate:modelValue":O=>e.value[w]=O},null,8,["modelValue","onUpdate:modelValue"])),re(qe).includes(f.id)?(L(),Ot(h,{key:2,parent:f.id,class:"pl-3 min-h-3 block w-full"},null,8,["parent"])):tt("",!0)]))),128))]),_:1},8,["list"]),x($t,{ref_key:"confirm",ref:i},null,512)])}}}),Li={key:0,class:"flex flex-col h-full max-h-full overflow-hidden relative p-3 pt-4 w-auto"},Ri={key:1,class:"flex flex-col h-full max-h-full overflow-hidden relative w-[300px]"},Vi={class:"p-3 border-b border-zinc-200 dark:border-zinc-700 text-center bg-white dark:bg-zinc-900 transition-all cursor-pointer flex flex-row items-center gap-2 shrink-0",style:{"min-height":"57px"}},Bi={class:"grow flex flex-row items-center gap-1"},ji={class:"relative w-full border-b border-zinc-200 dark:border-zinc-700"},Yi=["placeholder"],Xi={key:0,class:"flex flex-col gap-2 p-3"},Hi=D("div",{class:"w-full rounded-lg bg-zinc-100 dark:bg-zinc-800 h-10 animate-pulse"},null,-1),Ui=[Hi],Gi={key:1,class:"flex flex-col grow overflow-auto shrink p-3"},Wi={class:"w-[500px]"},Ji={class:"flex flex-row items-center p-8 py-6 border-b border-zinc-200 dark:border-zinc-700 place-content-between"},qi={class:"grid grid-cols-3 gap-3 p-8"},Ki={class:"flex flex-col justify-center"},Zi={class:"text-sm text-zinc-500 dark:text-zinc-400"},Qi={class:"flex flex-col justify-center"},eo={class:"text-sm text-zinc-500 dark:text-zinc-400"},to={class:"flex flex-col pt-2"},no={class:"text-sm text-zinc-500 dark:text-zinc-400"},io={class:"col-span-3 flex flex-row items-center gap-3 justify-end mt-6"},oo={__name:"index",setup(t){const e=ht(),n=J(!1),i=nn(),o=on(),r=J(null),a=J(null),s=J(null),l=J({plugin_name:(0,window.wp.i18n.__)("Custom plugin","snipvault"),plugin_author:"SnipVault",plugin_description:(0,window.wp.i18n.__)("Custom SnipVault plugin","snipvault")}),d=async()=>{const v=G.value.filter(g=>W.value.includes(g.id));for(let g of v)await c(g)},c=async v=>{e.updateState("loading",!0);const g=`${v.title.rendered} (copy)`,_={...v,title:g,status:"draft"};delete _.id;const C=await ne({endpoint:"wp/v2/svsnippets",params:{},type:"POST",data:_});Ce(),C&&(Q({type:"success",title:(0,window.wp.i18n.__)("Snippet duplicated","snipvault")}),await o.push(`/snippets/${C.data.id}`))},u=async()=>{e.updateState("loading",!0);const v=`Draft ${G.value.length+1}`,g={snippet_settings:{folder:lt.value}},I=await ne({endpoint:"wp/v2/svsnippets",params:{},type:"POST",data:{title:v,meta:g,status:"draft"}});Ce(),I&&(Q({type:"success",title:(0,window.wp.i18n.__)("Snippet created","snipvault")}),await o.push(`/snippets/${I.data.id}`))},m=async()=>{e.updateState("loading",!0);const v=`New Folder ${Y.value.length+1}`,g={folder_parent:lt.value},I=await ne({endpoint:"wp/v2/svfolders",params:{},type:"POST",data:{title:v,meta:g,status:"publish"}});e.updateState("loading",!1),I&&(Q({type:"success",title:(0,window.wp.i18n.__)("Folder created created","snipvault")}),Y.value.push({...I.data}))},h=async()=>{if(!await a.value.show({title:(0,window.wp.i18n.__)("Are you sure?","snipvault"),message:(0,window.wp.i18n.__)("Are you sure you want to delete these snippets? ","snipvault"),okButton:(0,window.wp.i18n.__)("Yes delete them","snipvault")}))return;const g=G.value.filter(_=>W.value.includes(_.id));for(let _ of g)await f(_.id)},f=async(v,g)=>{e.updateState("loading",!0);const _={endpoint:`wp/v2/svsnippets/${v}`,params:{force:!0},type:"DELETE"},I=await ne(_);Ce(),I&&(Q({type:"success",title:(0,window.wp.i18n.__)("Snippet deleted","snipvault")}),i.params.id==v&&await o.push("/"))},w=async()=>{const v=G.value.filter(ae=>W.value.includes(ae.id)),g=JSON.stringify(v),_=new Blob([g],{type:"application/json"}),I=window.URL.createObjectURL(_),C=document.createElement("a");C.href=I,C.download="snippets-export.json",document.body.appendChild(C),C.click(),document.body.removeChild(C);const de=(0,window.wp.i18n.sprintf)((0,window.wp.i18n.__)("Your download should have started automatically. If it didn't you can download <a href='%s' class='text-indigo-500' download>here</a>","snipvault"),I);await a.value.show({title:(0,window.wp.i18n.__)("Snippets exported!","snipvault"),message:de,okButton:(0,window.wp.i18n.__)("Ok","snipvault")}),window.URL.revokeObjectURL(I)},O=async()=>{const v=W.value,g={...l.value,snippet_ids:v};e.updateState("loading",!0);const I=await ne({endpoint:"snipvault/v1/export",params:{},type:"POST",data:g});if(e.updateState("loading",!1),!I)return;const C=document.createElement("a");C.href=I.data.download_url,C.download="",document.body.appendChild(C),C.click(),document.body.removeChild(C),s.value.close();const de=(0,window.wp.i18n.sprintf)((0,window.wp.i18n.__)("Your download should have started automatically. If it didn't you can download <a href='%s' class='text-indigo-500' download>here</a>","snipvault"),I.data.download_url);await a.value.show({title:(0,window.wp.i18n.__)("Plugin created!","snipvault"),message:de,okButton:(0,window.wp.i18n.__)("Ok","snipvault")})},z=async v=>{const g=v.target.files[0];try{await M(g),Q({type:"success",title:(0,window.wp.i18n.__)("Settings imported","snipvault")})}catch{}},M=async v=>{try{if(!v||!(v instanceof File)){Q({type:"error",title:(0,window.wp.i18n.__)("Please provide a valid JSON file","snipvault")});return}const g=await v.text(),_=JSON.parse(g);if(!Array.isArray(_)){Q({type:"error",title:(0,window.wp.i18n.__)("Invalid settings: must be an array","snipvault")});return}if(!_.length){Q({type:"error",title:(0,window.wp.i18n.__)("No snippets found","snipvault")});return}return await q(_),!0}catch(g){throw Q({type:"error",title:(0,window.wp.i18n.__)("Error uploading settings","snipvault")}),g}},q=async v=>{e.updateState("loading",!0);for(let g of v){const _={...g};_.title=g.title.rendered,delete _.id,await ne({endpoint:"wp/v2/svsnippets",params:{},type:"POST",data:_})}e.updateState("loading",!1),Ce()};return Mt(()=>G.value.sort((v,g)=>g.status.localeCompare(v.status)).filter(v=>Ve(_e.value,JSON.stringify(v)))),Tt([()=>G.value,()=>Y.value],()=>{for(let[v,g]of G.value.entries()){const _=g.meta.snippet_settings.folder;if(_===0)continue;Y.value.find(C=>C.id==_)||(G.value[v].meta.snippet_settings.folder=0)}for(let[v,g]of Y.value.entries()){const _=g.meta.folder_parent;if(_===0)continue;Y.value.find(C=>C.id==_)||(Y.value[v].meta.folder_parent=0)}},{deep:!0}),Tt(()=>{var v;return(v=i==null?void 0:i.params)==null?void 0:v.id},(v,g)=>{Nn.value=v},{immediate:!0}),$n(),Ce(),(v,g)=>(L(),X(st,null,[n.value?(L(),X("div",Li,[x(U,{type:"transparent",class:"",onClick:g[0]||(g[0]=_=>n.value=!1),title:v.__("Collapse","snipvault")},{default:F(()=>[x(V,{icon:"right_panel_close",class:"text-xl"})]),_:1},8,["title"])])):n.value?tt("",!0):(L(),X("div",Ri,[D("div",Vi,[D("div",Bi,[x(U,{type:"transparent",onClick:u,title:v.__("New Snippet","snipvault")},{default:F(()=>[x(V,{icon:"note_add",class:"text-xl"})]),_:1},8,["title"]),x(U,{type:"transparent",onClick:m,title:v.__("New folder","snipvault")},{default:F(()=>[x(V,{icon:"create_new_folder",class:"text-xl"})]),_:1},8,["title"]),x(U,{type:"transparent",disabled:!re(W).length,onClick:d,title:v.__("Duplicate","snipvault")},{default:F(()=>[x(V,{icon:"duplicate",class:"text-xl"})]),_:1},8,["disabled","title"]),x(U,{type:"transparent",disabled:!re(W).length,class:"",onClick:g[1]||(g[1]=_=>s.value.show()),title:v.__("Download to plugin","snipvault")},{default:F(()=>[x(V,{icon:"folder_zip",class:"text-xl"})]),_:1},8,["disabled","title"]),x(U,{type:"transparent",disabled:!re(W).length,class:"",onClick:w,title:v.__("Export","snipvault")},{default:F(()=>[x(V,{icon:"download",class:"text-xl"})]),_:1},8,["disabled","title"]),x(U,{type:"transparent",disabled:!re(W).length,class:"",onClick:h,title:v.__("Delete","snipvault")},{default:F(()=>[x(V,{icon:"delete",class:"text-xl"})]),_:1},8,["disabled","title"])]),x(U,{type:"transparent",onClick:g[2]||(g[2]=be(_=>r.value.click(),["stop","prevent"])),title:v.__("Import snippets from JSON file","snipvault")},{default:F(()=>[x(V,{icon:"upload",class:"text-xl"})]),_:1},8,["title"]),x(U,{type:"transparent",class:"",onClick:g[3]||(g[3]=_=>n.value=!n.value),title:v.__("Collapse","snipvault")},{default:F(()=>[x(V,{icon:"left_panel_close",class:"text-xl"})]),_:1},8,["title"])]),D("div",ji,[Tn(D("input",{type:"text","onUpdate:modelValue":g[4]||(g[4]=_=>In(_e)?_e.value=_:null),placeholder:v.__("Search snippets...","snipvault"),class:"px-6 py-4 pl-12 w-full bg-white dark:bg-zinc-900 focus:outline-0"},null,8,Yi),[[On,re(_e)]]),x(V,{icon:"search",class:"absolute left-5 top-1/2 -translate-y-1/2 text-zinc-500"})]),x(kn,{mode:"out-in"},{default:F(()=>[re(an)?(L(),X("div",Xi,[(L(),X(st,null,rn(4,_=>D("div",null,Ui)),64))])):(L(),X("div",Gi,[x(zi,{parent:0})]))]),_:1})])),D("input",{type:"file",accept:".json",onChange:z,class:"hidden",ref_key:"settingsUploader",ref:r},null,544),x($t,{ref_key:"confirm",ref:a},null,512),x(An,{ref_key:"pluginExportOptions",ref:s,position:"top"},{default:F(()=>[D("div",Wi,[D("div",Ji,[D("div",null,pe(v.__("Plugin options","snipvault")),1),x(U,{type:"transparent",onClick:g[5]||(g[5]=be(_=>s.value.close(),["stop"]))},{default:F(()=>[x(V,{icon:"close"})]),_:1})]),D("div",qi,[D("div",Ki,[D("span",Zi,pe(v.__("Plugin name","snipvault")),1)]),x(Yt,{type:"text",modelValue:l.value.plugin_name,"onUpdate:modelValue":g[6]||(g[6]=_=>l.value.plugin_name=_),class:"col-span-2"},null,8,["modelValue"]),D("div",Qi,[D("span",eo,pe(v.__("Author","snipvault")),1)]),x(Yt,{type:"text",modelValue:l.value.plugin_author,"onUpdate:modelValue":g[7]||(g[7]=_=>l.value.plugin_author=_),class:"col-span-2"},null,8,["modelValue"]),D("div",to,[D("span",no,pe(v.__("Description","snipvault")),1)]),x(Fn,{type:"text",modelValue:l.value.plugin_description,"onUpdate:modelValue":g[8]||(g[8]=_=>l.value.plugin_description=_),class:"col-span-2"},null,8,["modelValue"]),D("div",io,[x(U,{type:"default",onClick:g[9]||(g[9]=_=>s.value.close())},{default:F(()=>[jt(pe(v.__("Cancel","snipvault")),1)]),_:1}),x(U,{type:"primary",onClick:O},{default:F(()=>[jt(pe(v.__("Download","snipvault")),1)]),_:1})])])])]),_:1},512)],64))}},ro={class:"border-r border-zinc-200 dark:border-zinc-700 h-full max-h-full shrink-0"},ao={class:"grow overflow-hidden"},so={key:1,class:"w-full h-full flex flex-col items-center justify-center p-16"},yo={__name:"index",setup(t){return(e,n)=>{const i=Ue("RouterView");return L(),X(st,null,[D("div",ro,[x(oo)]),D("div",ao,[x(i,null,{default:F(({Component:o})=>[o?(L(),Ot(Pn(o),{key:0})):(L(),X("div",so,[x(V,{icon:"code",style:{"font-size":"88px"}}),D("div",null,pe(e.__("No snippet selected","snipvault")),1)]))]),_:1})])],64)}}};export{yo as default};
//# sourceMappingURL=index-BfA7saN3.js.map
